(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{2387:function(e,t,s){var r={"./box.min":[569,0],"./box.min.json":[569,0],"./phoneModel.min":[570,1],"./phoneModel.min.json":[570,1]};function n(e){if(!s.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],n=t[0];return s.e(t[1]).then((function(){return s.t(n,3)}))}n.keys=function(){return Object.keys(r)},n.id=2387,e.exports=n},2650:function(e,t,s){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),o=this&&this.__decorate||function(e,t,s,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,r);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(a=(o<3?n(a):o>3?n(t,s,a):n(t,s))||a);return o>3&&a&&Object.defineProperty(t,s,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0});var i=s(129),u=s(2651),l=s(211),c=s(246),p=s(168),j=s(3220),d=s(3223),f=s(571),h=s(3226),m=s(3221),y=s(3219),b=function(e){function t(t){var s=e.call(this)||this;return s.upgrade=t,s}return n(t,e),t.ctorParameters=function(){return[{type:c.UpgradeModule}]},t=o([i.NgModule({imports:[j.UpgradeModule,u.BrowserAnimationsModule,p.RouterModule.forRoot(),l.RouterModule.forRoot(j.UPGRADE_ROUTES.slice(),{enableTracing:!1,useHash:!0}),p.CoreModule.forRoot(),d.AssetsNavigatorModule,h.ReportsModule,c.UpgradeModule,j.DashboardUpgradeModule,f.CockpitDashboardModule,m.SensorPhoneModule],declarations:[y.ClusteredMap],entryComponents:[y.ClusteredMap],providers:[{provide:p.HOOK_COMPONENTS,multi:!0,useValue:[{id:"sag.map.cluster",label:"Clustered Map",description:"Display a clustered map of all devices",component:y.ClusteredMap}]}]}),a("design:paramtypes",[c.UpgradeModule])],t)}(j.HybridAppModule);t.AppModule=b},3219:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,r);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(a=(o<3?n(a):o>3?n(t,s,a):n(t,s))||a);return o>3&&a&&Object.defineProperty(t,s,a),a},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?n(e.value):new s((function(t){t(e.value)})).then(a,i)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var s,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{s=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0});var i=s(129),u=s(250),l=s(286),c=function(){function e(e){var t=this;this.fetchClient=e,this.map=l.map("map").setView([0,0],2),l.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),this.markers=l.geoJson(null,{pointToLayer:this.createClusterIcon}).addTo(this.map),this.map.on("moveend",this.update),this.markers.on("click",(function(e){return o(t,void 0,void 0,(function(){var t;return a(this,(function(s){switch(s.label){case 0:return e.layer.feature.properties.cluster_id?[4,this.fetchClient.fetch("service/server-side-clustering",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({getClusterExpansionZoom:e.layer.feature.properties.cluster_id,center:e.latlng})})]:[3,2];case 1:t=s.sent(),console.log(t),s.label=2;case 2:return[2]}}))}))})),this.update()}return e.prototype.createClusterIcon=function(e,t){if(!e.properties.cluster)return l.marker(t);var s=e.properties.point_count,r=s<100?"small":s<1e3?"medium":"large",n=l.divIcon({html:"<div><span>"+e.properties.point_count_abbreviated+"</span></div>",className:"marker-cluster marker-cluster-"+r,iconSize:l.point(40,40)});return l.marker(t,{icon:n})},e.prototype.update=function(){return o(this,void 0,void 0,(function(){var e,t,s,r;return a(this,(function(n){switch(n.label){case 0:return e=this.map.getBounds(),[4,this.fetchClient.fetch("service/server-side-clustering",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bbox:[e.getWest(),e.getSouth(),e.getEast(),e.getNorth()],zoom:this.map.getZoom()})})];case 1:return t=n.sent(),console.log(t),this.markers.clearLayers(),r=(s=this.markers).addData,[4,t.json()];case 2:return r.apply(s,[n.sent()]),[2]}}))}))},e.ctorParameters=function(){return[{type:u.FetchClient}]},e=r([i.Component({selector:"clustered-map",template:'<div id="map"></div>',styles:[".text { transform: scaleX(-1); font-size: 3em ;}"]}),n("design:paramtypes",[u.FetchClient])],e)}();t.ClusteredMap=c},3230:function(e,t,s){"use strict";this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0}),s(585),s(737);var r=s(129),n=s(2648),o=s(2650);r.enableProdMode(),t.bootstrap=function(){return n.platformBrowserDynamic().bootstrapModule(o.AppModule).catch((function(e){return console.log(e)}))}},533:function(e,t){function s(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}s.keys=function(){return[]},s.resolve=s,e.exports=s,s.id=533},585:function(e,t,s){"use strict";this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0}),s(586),s(601),s(720),window.__Zone_disable_requestAnimationFrame=!0,window.__zone_symbol__BLACK_LISTED_EVENTS=["scroll","mousemove","message","mouseover","mouseout","mouseenter","mouseleave"],s(731),s(732),s(733).addPolyfills()},737:function(e,t,s){"use strict";this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0}),s(738),s(515),s(2040),s(2047),s(2060),s(2072),s(2101),s(2110),s(241),s(2240),s(2286),s(2292),s(517),s(2329),s(518),s(242),s(516),s(2350),s(2355),s(2361),s(2370),s(2379),s(2401),s(2408),s(2413),s(2420),s(2422),s(2424),s(293),s(2521),s(519),s(515),s(2543),s(2553),s(2559),s(2568),s(2575),s(2582),s(2601),s(2614),s(2624),s(2634),s(2643)},739:function(e,t,s){var r={"./af":359,"./af.js":359,"./ar":360,"./ar-dz":361,"./ar-dz.js":361,"./ar-kw":362,"./ar-kw.js":362,"./ar-ly":363,"./ar-ly.js":363,"./ar-ma":364,"./ar-ma.js":364,"./ar-sa":365,"./ar-sa.js":365,"./ar-tn":366,"./ar-tn.js":366,"./ar.js":360,"./az":367,"./az.js":367,"./be":368,"./be.js":368,"./bg":369,"./bg.js":369,"./bm":370,"./bm.js":370,"./bn":371,"./bn.js":371,"./bo":372,"./bo.js":372,"./br":373,"./br.js":373,"./bs":374,"./bs.js":374,"./ca":375,"./ca.js":375,"./cs":376,"./cs.js":376,"./cv":377,"./cv.js":377,"./cy":378,"./cy.js":378,"./da":379,"./da.js":379,"./de":380,"./de-at":381,"./de-at.js":381,"./de-ch":382,"./de-ch.js":382,"./de.js":380,"./dv":383,"./dv.js":383,"./el":384,"./el.js":384,"./en-SG":385,"./en-SG.js":385,"./en-au":386,"./en-au.js":386,"./en-ca":387,"./en-ca.js":387,"./en-gb":388,"./en-gb.js":388,"./en-ie":389,"./en-ie.js":389,"./en-il":390,"./en-il.js":390,"./en-nz":391,"./en-nz.js":391,"./eo":392,"./eo.js":392,"./es":393,"./es-do":394,"./es-do.js":394,"./es-us":395,"./es-us.js":395,"./es.js":393,"./et":396,"./et.js":396,"./eu":397,"./eu.js":397,"./fa":398,"./fa.js":398,"./fi":399,"./fi.js":399,"./fo":400,"./fo.js":400,"./fr":401,"./fr-ca":402,"./fr-ca.js":402,"./fr-ch":403,"./fr-ch.js":403,"./fr.js":401,"./fy":404,"./fy.js":404,"./ga":405,"./ga.js":405,"./gd":406,"./gd.js":406,"./gl":407,"./gl.js":407,"./gom-latn":408,"./gom-latn.js":408,"./gu":409,"./gu.js":409,"./he":410,"./he.js":410,"./hi":411,"./hi.js":411,"./hr":412,"./hr.js":412,"./hu":413,"./hu.js":413,"./hy-am":414,"./hy-am.js":414,"./id":415,"./id.js":415,"./is":416,"./is.js":416,"./it":417,"./it-ch":418,"./it-ch.js":418,"./it.js":417,"./ja":419,"./ja.js":419,"./jv":420,"./jv.js":420,"./ka":421,"./ka.js":421,"./kk":422,"./kk.js":422,"./km":423,"./km.js":423,"./kn":424,"./kn.js":424,"./ko":425,"./ko.js":425,"./ku":426,"./ku.js":426,"./ky":427,"./ky.js":427,"./lb":428,"./lb.js":428,"./lo":429,"./lo.js":429,"./lt":430,"./lt.js":430,"./lv":431,"./lv.js":431,"./me":432,"./me.js":432,"./mi":433,"./mi.js":433,"./mk":434,"./mk.js":434,"./ml":435,"./ml.js":435,"./mn":436,"./mn.js":436,"./mr":437,"./mr.js":437,"./ms":438,"./ms-my":439,"./ms-my.js":439,"./ms.js":438,"./mt":440,"./mt.js":440,"./my":441,"./my.js":441,"./nb":442,"./nb.js":442,"./ne":443,"./ne.js":443,"./nl":444,"./nl-be":445,"./nl-be.js":445,"./nl.js":444,"./nn":446,"./nn.js":446,"./pa-in":447,"./pa-in.js":447,"./pl":448,"./pl.js":448,"./pt":449,"./pt-br":450,"./pt-br.js":450,"./pt.js":449,"./ro":451,"./ro.js":451,"./ru":452,"./ru.js":452,"./sd":453,"./sd.js":453,"./se":454,"./se.js":454,"./si":455,"./si.js":455,"./sk":456,"./sk.js":456,"./sl":457,"./sl.js":457,"./sq":458,"./sq.js":458,"./sr":459,"./sr-cyrl":460,"./sr-cyrl.js":460,"./sr.js":459,"./ss":461,"./ss.js":461,"./sv":462,"./sv.js":462,"./sw":463,"./sw.js":463,"./ta":464,"./ta.js":464,"./te":465,"./te.js":465,"./tet":466,"./tet.js":466,"./tg":467,"./tg.js":467,"./th":468,"./th.js":468,"./tl-ph":469,"./tl-ph.js":469,"./tlh":470,"./tlh.js":470,"./tr":471,"./tr.js":471,"./tzl":472,"./tzl.js":472,"./tzm":473,"./tzm-latn":474,"./tzm-latn.js":474,"./tzm.js":473,"./ug-cn":475,"./ug-cn.js":475,"./uk":476,"./uk.js":476,"./ur":477,"./ur.js":477,"./uz":478,"./uz-latn":479,"./uz-latn.js":479,"./uz.js":478,"./vi":480,"./vi.js":480,"./x-pseudo":481,"./x-pseudo.js":481,"./yo":482,"./yo.js":482,"./zh-cn":483,"./zh-cn.js":483,"./zh-hk":484,"./zh-hk.js":484,"./zh-tw":485,"./zh-tw.js":485};function n(e){var t=o(e);return s(t)}function o(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id=739}}]);