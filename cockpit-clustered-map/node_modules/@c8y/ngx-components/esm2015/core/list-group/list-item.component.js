import * as tslib_1 from "tslib";
import { Component, ContentChild, ElementRef, ContentChildren, HostBinding, Input, QueryList } from '@angular/core';
import { ListItemActionComponent } from './list-item-action.component';
import { ListItemCollapseComponent } from './list-item-collapse.component';
import { ListItemFooterComponent } from './list-item-footer.component';
let ListItemComponent = class ListItemComponent {
    constructor(element) {
        this.element = element;
        this.active = false;
        this.collapsed = true;
        this.showFooter = false;
        this.showActions = false;
        this.showCollapse = false;
        this.dropdownUp = false;
        this.ACTION_ITEM_HEIGHT = 40;
    }
    ngAfterContentChecked() {
        this.actions = this.itemActions.toArray();
        this.showFooter = this.itemFooter != null;
        this.showActions = this.itemActions.length > 0;
        this.showCollapse = this.itemCollapse != null;
    }
    /**
     * A helper function which helps to determine if the dropdown
     * should toggle up.
     * @param dropdown The dropdown instance.
     */
    showDropdownUp() {
        const rect = this.element.nativeElement.getBoundingClientRect();
        this.dropdownUp =
            rect.bottom + this.itemActions.length * this.ACTION_ITEM_HEIGHT > window.innerHeight;
    }
};
ListItemComponent.ctorParameters = () => [
    { type: ElementRef }
];
tslib_1.__decorate([
    Input(),
    HostBinding('class.active')
], ListItemComponent.prototype, "active", void 0);
tslib_1.__decorate([
    Input()
], ListItemComponent.prototype, "collapsed", void 0);
tslib_1.__decorate([
    ContentChild(ListItemFooterComponent, { static: false })
], ListItemComponent.prototype, "itemFooter", void 0);
tslib_1.__decorate([
    ContentChildren(ListItemActionComponent)
], ListItemComponent.prototype, "itemActions", void 0);
tslib_1.__decorate([
    ContentChild(ListItemCollapseComponent, { static: false })
], ListItemComponent.prototype, "itemCollapse", void 0);
ListItemComponent = tslib_1.__decorate([
    Component({
        selector: 'c8y-list-item, c8y-li',
        template: "<div [ngClass]=\"{ expanded: !collapsed }\">\n  <div class=\"c8y-list__item__block\">\n    <ng-content select=\"c8y-list-item-radio, c8y-li-radio\"></ng-content>\n    <ng-content select=\"c8y-list-item-checkbox, c8y-li-checkbox\"></ng-content>\n\n    <ng-content select=\"c8y-list-item-icon, c8y-li-icon\"></ng-content>\n\n    <div class=\"c8y-list__item__body text-truncate-wrap\">\n      <ng-content select=\"c8y-list-item-body, c8y-li-body\"></ng-content>\n      <ng-content></ng-content>\n      <div class=\"c8y-list__item__footer\" *ngIf=\"showFooter\">\n        <ng-content select=\"c8y-list-item-footer, c8y-li-footer\"></ng-content>\n      </div>\n    </div>\n\n    <div class=\"c8y-list__item__actions\" *ngIf=\"showCollapse || showActions\">\n      <button\n        class=\"collapse-btn\"\n        title=\"{{ 'Expand' | translate }}\"\n        type=\"button\"\n        (click)=\"collapsed = !collapsed\"\n        [attr.aria-expanded]=\"!collapsed\"\n        *ngIf=\"showCollapse\"\n      >\n        <i [c8yIcon]=\"'chevron-down'\"></i>\n      </button>\n      <div\n        class=\"dropdown\"\n        dropdown\n        [dropup]=\"dropdownUp\"\n        *ngIf=\"showActions\"\n        (onShown)=\"showDropdownUp()\"\n      >\n        <button\n          class=\"dropdown-toggle c8y-dropdown\"\n          dropdownToggle\n          title=\"{{ 'Options' | translate }}\"\n          type=\"button\"\n          aria-haspopup=\"true\"\n        >\n          <i [c8yIcon]=\"'ellipsis-v'\"></i>\n        </button>\n        <ul class=\"dropdown-menu dropdown-menu-right\" *dropdownMenu>\n          <ng-content select=\"c8y-list-item-action, c8y-li-action\"></ng-content>\n          <ng-container *ngFor=\"let action of actions\">\n            <ng-container *ngTemplateOutlet=\"action.template\"></ng-container>\n          </ng-container>\n        </ul>\n      </div>\n\n      <ng-content select=\"c8y-list-item-action, c8y-li-action\" *ngIf=\"showActions\"></ng-content>\n    </div>\n  </div>\n\n  <div *ngIf=\"showCollapse\" [collapse]=\"collapsed\" [isAnimated]=\"true\">\n    <div class=\"c8y-list__item__collapse--container\">\n      <ng-content select=\"c8y-list-item-collapse, c8y-li-collapse\"></ng-content>\n    </div>\n  </div>\n</div>\n",
        host: {
            class: 'c8y-list__item'
        }
    })
], ListItemComponent);
export { ListItemComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjOHkvbmd4LWNvbXBvbmVudHMvIiwic291cmNlcyI6WyJjb3JlL2xpc3QtZ3JvdXAvbGlzdC1pdGVtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxZQUFZLEVBQ1osVUFBVSxFQUNWLGVBQWUsRUFDZixXQUFXLEVBQ1gsS0FBSyxFQUNMLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN2RSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUMzRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQVN2RSxJQUFhLGlCQUFpQixHQUE5QixNQUFhLGlCQUFpQjtJQXFCNUIsWUFBbUIsT0FBbUI7UUFBbkIsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQWxCdEMsV0FBTSxHQUFZLEtBQUssQ0FBQztRQUV4QixjQUFTLEdBQVksSUFBSSxDQUFDO1FBUTFCLGVBQVUsR0FBWSxLQUFLLENBQUM7UUFDNUIsZ0JBQVcsR0FBWSxLQUFLLENBQUM7UUFDN0IsaUJBQVksR0FBWSxLQUFLLENBQUM7UUFFOUIsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUVYLHVCQUFrQixHQUFHLEVBQUUsQ0FBQztJQUVBLENBQUM7SUFFMUMscUJBQXFCO1FBQ25CLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUMxQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDO1FBQzFDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUM7SUFDaEQsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxjQUFjO1FBQ1osTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUNoRSxJQUFJLENBQUMsVUFBVTtZQUNiLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7SUFDekYsQ0FBQztDQUNGLENBQUE7O1lBbkI2QixVQUFVOztBQWxCdEM7SUFGQyxLQUFLLEVBQUU7SUFDUCxXQUFXLENBQUMsY0FBYyxDQUFDO2lEQUNKO0FBRXhCO0lBREMsS0FBSyxFQUFFO29EQUNrQjtBQUUxQjtJQURDLFlBQVksQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQztxREFDckI7QUFFcEM7SUFEQyxlQUFlLENBQUMsdUJBQXVCLENBQUM7c0RBQ087QUFFaEQ7SUFEQyxZQUFZLENBQUMseUJBQXlCLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUM7dURBQ25CO0FBWDdCLGlCQUFpQjtJQVA3QixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsdUJBQXVCO1FBQ2pDLGd0RUFBeUM7UUFDekMsSUFBSSxFQUFFO1lBQ0osS0FBSyxFQUFFLGdCQUFnQjtTQUN4QjtLQUNGLENBQUM7R0FDVyxpQkFBaUIsQ0F3QzdCO1NBeENZLGlCQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgQ29udGVudENoaWxkLFxuICBFbGVtZW50UmVmLFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIEhvc3RCaW5kaW5nLFxuICBJbnB1dCxcbiAgUXVlcnlMaXN0XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTGlzdEl0ZW1BY3Rpb25Db21wb25lbnQgfSBmcm9tICcuL2xpc3QtaXRlbS1hY3Rpb24uY29tcG9uZW50JztcbmltcG9ydCB7IExpc3RJdGVtQ29sbGFwc2VDb21wb25lbnQgfSBmcm9tICcuL2xpc3QtaXRlbS1jb2xsYXBzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgTGlzdEl0ZW1Gb290ZXJDb21wb25lbnQgfSBmcm9tICcuL2xpc3QtaXRlbS1mb290ZXIuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWxpc3QtaXRlbSwgYzh5LWxpJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xpc3QtaXRlbS5jb21wb25lbnQuaHRtbCcsXG4gIGhvc3Q6IHtcbiAgICBjbGFzczogJ2M4eS1saXN0X19pdGVtJ1xuICB9XG59KVxuZXhwb3J0IGNsYXNzIExpc3RJdGVtQ29tcG9uZW50IHtcbiAgQElucHV0KClcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5hY3RpdmUnKVxuICBhY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KClcbiAgY29sbGFwc2VkOiBib29sZWFuID0gdHJ1ZTtcbiAgQENvbnRlbnRDaGlsZChMaXN0SXRlbUZvb3RlckNvbXBvbmVudCwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGl0ZW1Gb290ZXI6IExpc3RJdGVtRm9vdGVyQ29tcG9uZW50O1xuICBAQ29udGVudENoaWxkcmVuKExpc3RJdGVtQWN0aW9uQ29tcG9uZW50KVxuICBpdGVtQWN0aW9uczogUXVlcnlMaXN0PExpc3RJdGVtQWN0aW9uQ29tcG9uZW50PjtcbiAgQENvbnRlbnRDaGlsZChMaXN0SXRlbUNvbGxhcHNlQ29tcG9uZW50LCB7IHN0YXRpYzogZmFsc2UgfSlcbiAgaXRlbUNvbGxhcHNlOiBMaXN0SXRlbUNvbGxhcHNlQ29tcG9uZW50O1xuXG4gIHNob3dGb290ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgc2hvd0FjdGlvbnM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgc2hvd0NvbGxhcHNlOiBib29sZWFuID0gZmFsc2U7XG4gIGFjdGlvbnM6IExpc3RJdGVtQWN0aW9uQ29tcG9uZW50W107XG4gIGRyb3Bkb3duVXA6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IEFDVElPTl9JVEVNX0hFSUdIVCA9IDQwO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBlbGVtZW50OiBFbGVtZW50UmVmKSB7fVxuXG4gIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGlvbnMgPSB0aGlzLml0ZW1BY3Rpb25zLnRvQXJyYXkoKTtcbiAgICB0aGlzLnNob3dGb290ZXIgPSB0aGlzLml0ZW1Gb290ZXIgIT0gbnVsbDtcbiAgICB0aGlzLnNob3dBY3Rpb25zID0gdGhpcy5pdGVtQWN0aW9ucy5sZW5ndGggPiAwO1xuICAgIHRoaXMuc2hvd0NvbGxhcHNlID0gdGhpcy5pdGVtQ29sbGFwc2UgIT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGhlbHBlciBmdW5jdGlvbiB3aGljaCBoZWxwcyB0byBkZXRlcm1pbmUgaWYgdGhlIGRyb3Bkb3duXG4gICAqIHNob3VsZCB0b2dnbGUgdXAuXG4gICAqIEBwYXJhbSBkcm9wZG93biBUaGUgZHJvcGRvd24gaW5zdGFuY2UuXG4gICAqL1xuICBzaG93RHJvcGRvd25VcCgpIHtcbiAgICBjb25zdCByZWN0ID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdGhpcy5kcm9wZG93blVwID1cbiAgICAgIHJlY3QuYm90dG9tICsgdGhpcy5pdGVtQWN0aW9ucy5sZW5ndGggKiB0aGlzLkFDVElPTl9JVEVNX0hFSUdIVCA+IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgfVxufVxuIl19