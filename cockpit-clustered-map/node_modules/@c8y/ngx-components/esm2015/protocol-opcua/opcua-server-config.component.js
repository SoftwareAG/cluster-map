import * as tslib_1 from "tslib";
import { Component, Input, Output, EventEmitter, ViewChild } from '@angular/core';
import { gettext, DropAreaComponent } from '@c8y/ngx-components';
import { cloneDeep } from 'lodash-es';
import { OpcuaService } from './opcuaService';
let OpcuaServerConfigComponent = class OpcuaServerConfigComponent {
    constructor(opcuaService) {
        this.fileName = '';
        this.targetConnectionState = '1';
        this.minIntervalNumber = 1;
        this.connectionStatusLabel = '';
        this.canceled = new EventEmitter();
        this.removed = new EventEmitter();
        this.saved = new EventEmitter();
        this.NONE = 'NONE';
        this.SIGN = 'SIGN';
        this.SIGN_ENC = 'SIGN_ENCRYPT';
        this.securityPolicies = {
            sign: [
                `BASIC256_${this.SIGN}`,
                `BASIC128RSA15_${this.SIGN}`,
                `BASIC256SHA256_${this.SIGN}`
            ],
            sign_enc: [
                `BASIC256_${this.SIGN_ENC}`,
                `BASIC128RSA15_${this.SIGN_ENC}`,
                `BASIC256SHA256_${this.SIGN_ENC}`,
            ]
        };
        this.ANONYM = {
            id: 1,
            value: gettext('Anonymous')
        };
        this.USER_PASSWORD = {
            id: 2,
            value: gettext('Username/Password')
        };
        this.KEY_BASED = {
            id: 3,
            value: gettext('Key-based Authentication')
        };
        this.initialKeystore = {
            lastModified: 0,
            name: '',
            type: '',
            slice: null,
            size: 0
        };
        this.keystore = this.initialKeystore;
        this.authSwitch = false;
        this.opcuaService = opcuaService;
    }
    set server(server) {
        if (server) {
            this._server = cloneDeep(server);
            this.model = cloneDeep(server);
            this.fileName = this.model.config.keystoreFilename;
            if (server.id && server.id === 'new') {
                // enabled connection state
                this.targetConnectionState = '1';
                this.model.config.targetConnectionState = 'enabled';
            }
            else {
                this.targetConnectionState = (this.model.config.targetConnectionState === 'enabled') ? '1' : '0';
            }
            this.updateConnectionStatusLabel(this._server);
        }
    }
    get server() {
        return this._server;
    }
    ngOnInit() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            this.authSwitch = false;
            this.securityModes = [
                this.NONE,
                this.SIGN,
                this.SIGN_ENC
            ];
            this.authenticationModes = [
                this.ANONYM,
                this.USER_PASSWORD,
                this.KEY_BASED
            ];
            this.setCurrentAuthenticationMode();
            this.setCurrentSecurityMode();
        });
    }
    ngOnChanges() {
        this.setCurrentSecurityMode();
        this.setCurrentAuthenticationMode();
    }
    cancel() {
        this.canceled.emit(this.model);
    }
    remove() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            yield this.removeKeystore(this.model);
            this.removed.emit(this.model);
        });
    }
    save() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            if (this.keystore && this.keystore.size > 0 && this.keystore.name && this.keystore.name.length > 0) {
                const response = yield this.uploadKeystore(this.model.config.keystoreBinaryId);
                if (response && response.data && response.data.id) {
                    this.model.config.keystoreBinaryId = response.data.id;
                }
                // if the keystore was uploaded successful we can remove
                // the local keystore. This will prevent another request to binary api
                // when the user will edit other inputs in the form and hit save again.
                this.keystore = this.initialKeystore;
            }
            // will remove keystore (binary) when the user switched
            // authentication settings from key-based to anonymous or username/password
            if (this.authSwitch) {
                this.removeKeystore(this.server);
            }
            this.saved.emit(this.model);
        });
    }
    uploadFile(droppedFiles) {
        if (droppedFiles.length === 1) {
            this.keystore = droppedFiles[0].file;
            this.fileName = this.keystore.name;
        }
        else {
            // dropped more than one file
            console.warn('Tried to import... Import aborted.');
        }
    }
    setPolicy(data) {
        if (data === this.NONE) {
            this.model.config.securityMode = this.NONE;
        }
        else if (data === this.SIGN) {
            this.model.config.securityMode = this.securityPolicies.sign[0];
        }
        else if (data === this.SIGN_ENC) {
            this.model.config.securityMode = this.securityPolicies.sign_enc[0];
        }
    }
    setServerConnection(data) {
        this.model.config.targetConnectionState = (data !== '0') ? 'enabled' : 'disabled';
    }
    updateAuthentication(data) {
        if (data && data.id) {
            switch (data.id) {
                // Anonymous
                case 1:
                    this.resetUserAuthentication();
                    this.resetKeyBasedAuthentication();
                    break;
                // User/Password
                case 2:
                    this.resetKeyBasedAuthentication();
                    this.restoreUserData();
                    break;
                // Key-based
                case 3:
                    this.resetUserAuthentication();
                    this.restoreKeyBasedData();
                    break;
                default:
                    console.warn('Invalid authentication id', data.id);
                    break;
            }
        }
    }
    updateConnectionStatusLabel(server) {
        const connected = server.c8y_Connection && server.c8y_Connection.status === 'CONNECTED';
        const label = connected ? gettext('Connected') : gettext('Disconnected');
        this.connectionStatusLabel = label;
    }
    uploadKeystore(binaryId) {
        if (!binaryId) {
            return this.opcuaService.uploadKeystore(this.keystore);
        }
        else if (binaryId && binaryId.length > 0) {
            // update existing binary
            return this.opcuaService.updateKeystore(binaryId, this.keystore);
        }
    }
    removeKeystore(server) {
        if (server &&
            server.config &&
            server.config.keystoreBinaryId &&
            server.config.keystoreBinaryId.length > 0) {
            this.authSwitch = false;
            return this.opcuaService.removeKeystore(this.server.config.keystoreBinaryId);
        }
    }
    resetUserAuthentication() {
        this.model.config.userName = null;
        this.model.config.userPassword = null;
        this.model.config.userIdentityMode = 'none';
    }
    resetKeyBasedAuthentication() {
        this.authSwitch = true;
        this.model.config.keystorePass = null;
        this.model.config.certificatePass = null;
        this.model.config.keystoreBinaryId = '';
        this.model.config.keystoreFilename = '';
        this.model.config.userIdentityMode = 'none';
    }
    restoreUserData() {
        this.model.config.userName = this._server.config.userName;
        this.model.config.userPassword = this._server.config.userPassword;
        this.model.config.userIdentityMode = 'userAndPassword';
    }
    restoreKeyBasedData() {
        this.authSwitch = false;
        this.model.config.keystorePass = this._server.config.keystorePass;
        this.model.config.certificatePass = this._server.config.certificatePass;
        this.model.config.keystoreBinaryId = this._server.config.keystoreBinaryId;
        this.model.config.keystoreFilename = this._server.config.keystoreFilename;
        this.model.config.userIdentityMode = 'certificate';
    }
    getServerConfig() {
        let cfg = {
            securityMode: this.NONE,
            userIdentityMode: 'none'
        };
        if (this.server && this.server.config) {
            cfg = this.server.config;
        }
        return cfg;
    }
    setCurrentSecurityMode() {
        const { securityMode } = this.getServerConfig();
        if (securityMode) {
            const foundInSign = this.securityPolicies.sign.find((el) => el === securityMode);
            if (foundInSign) {
                this.currentSecMode = this.SIGN;
            }
            else {
                const foundInSignEncrypt = this.securityPolicies.sign_enc.find((el) => el === securityMode);
                foundInSignEncrypt ? this.currentSecMode = this.SIGN_ENC : this.currentSecMode = this.NONE;
            }
        }
    }
    setCurrentAuthenticationMode() {
        const { userIdentityMode } = this.getServerConfig();
        switch (userIdentityMode) {
            case 'certificate':
                this.authenticationMode = this.KEY_BASED;
                break;
            case 'userAndPassword':
                this.authenticationMode = this.USER_PASSWORD;
                break;
            case 'Anonymous':
                this.authenticationMode = this.ANONYM;
                break;
            case 'UserName':
                this.authenticationMode = this.USER_PASSWORD;
                break;
            case 'Certificate':
                this.authenticationMode = this.KEY_BASED;
                break;
            default:
                this.authenticationMode = this.ANONYM;
                break;
        }
    }
};
OpcuaServerConfigComponent.ctorParameters = () => [
    { type: OpcuaService }
];
tslib_1.__decorate([
    ViewChild('opcuaConfigForm', { static: false })
], OpcuaServerConfigComponent.prototype, "opcuaConfigForm", void 0);
tslib_1.__decorate([
    ViewChild(DropAreaComponent, { static: false })
], OpcuaServerConfigComponent.prototype, "dropArea", void 0);
tslib_1.__decorate([
    Output()
], OpcuaServerConfigComponent.prototype, "canceled", void 0);
tslib_1.__decorate([
    Output()
], OpcuaServerConfigComponent.prototype, "removed", void 0);
tslib_1.__decorate([
    Output()
], OpcuaServerConfigComponent.prototype, "saved", void 0);
tslib_1.__decorate([
    Input()
], OpcuaServerConfigComponent.prototype, "server", null);
OpcuaServerConfigComponent = tslib_1.__decorate([
    Component({
        selector: 'opcua-server-config',
        template: "<form #opcuaConfigForm=\"ngForm\" class=\"card card-scroll\" *ngIf=\"server\">\n  <div class=\"card-header\" style=\"flex-wrap: wrap;\">\n    <button\n      class=\"btn btn-clean visible-sm visible-xs\"\n      title=\"{{ 'Back' | translate }}\"\n      (click)=\"cancel()\"\n    >\n      <i c8y-icon=\"chevron-left\" class=\"fa fw fa-chevron-left\"></i\n      ><span translate>Back</span></button\n    ><br />\n    <!-- SERVER NAME -->\n    <label class=\"editable\" style=\"width: 100%;\">\n      <input\n        type=\"text\"\n        class=\"form-control input-lg\"\n        placeholder=\"{{ 'Server name' | translate }}\"\n        id=\"name\"\n        name=\"name\"\n        [(ngModel)]=\"model.name\"\n        required\n      />\n    </label>\n  </div>\n  <div class=\"inner-scroll\">\n    <div class=\"card-block bg-gray-lighter top-p-md\">\n      <div class=\"tight-grid\">\n        <div class=\"col-sm-6\">\n          <label style=\"width: 100%;\" translate>Server connection</label>\n          <button\n            type=\"button\"\n            class=\"btn top-m-xs\"\n            name=\"serverConnection\"\n            [(ngModel)]=\"targetConnectionState\"\n            (ngModelChange)=\"setServerConnection($event)\"\n            btnCheckbox\n            btnCheckboxTrue=\"1\"\n            btnCheckboxFalse=\"0\"\n          >\n            <span\n              title=\"{{ 'Enabled' | translate }}\"\n              [hidden]=\"targetConnectionState !== '1'\"\n              translate\n              >Enabled</span\n            >\n            <span\n              title=\"{{ 'Disabled' | translate }}\"\n              [hidden]=\"targetConnectionState !== '0'\"\n              translate\n              >Disabled</span\n            >\n          </button>\n        </div>\n        <div class=\"col-sm-6\">\n          <label translate>Connection status</label>\n          <div class=\"form-control-static\">\n            <device-status class=\"right-p-sm\" [mo]=\"server\"></device-status>\n            <span>{{ connectionStatusLabel | translate }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"card-block\">\n      <!-- SERVER URL-->\n      <c8y-form-group>\n        <label for=\"configServerUrl\" translate>Server URL</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          id=\"configServerUrl\"\n          name=\"serverUrl\"\n          [(ngModel)]=\"model.config.serverUrl\"\n          c8yDefaultValidation=\"opcuaBrowsePath\"\n          required\n        />\n      </c8y-form-group>\n\n      <!-- TIMEOUT & STATUS-CHECK-INTERVAL-->\n      <div class=\"tight-grid\">\n        <div class=\"col-md-6\">\n          <c8y-form-group>\n            <label for=\"config.timeout\" translate>Timeout</label>\n            <div class=\"input-group\">\n              <input\n                type=\"number\"\n                class=\"form-control\"\n                id=\"config.timeout\"\n                name=\"timeout\"\n                [min]=\"minIntervalNumber\"\n                placeholder=\"{{ 'e.g.' | translate }} 30\"\n                [(ngModel)]=\"model.config.timeout\"\n                required\n              />\n              <span class=\"input-group-addon units\" translate>\n                seconds\n              </span>\n            </div>\n          </c8y-form-group>\n        </div>\n        <div class=\"col-md-6\">\n          <c8y-form-group>\n            <label for=\"config.statusCheckInterval\" translate>Status check interval</label>\n            <div class=\"input-group\">\n              <input\n                type=\"number\"\n                class=\"form-control\"\n                id=\"config.statusCheckInterval\"\n                name=\"statusCheckInterval\"\n                [min]=\"minIntervalNumber\"\n                placeholder=\"{{ 'e.g.' | translate }} 40\"\n                [(ngModel)]=\"model.config.statusCheckInterval\"\n                required\n              />\n              <span class=\"input-group-addon units\" translate>\n                seconds\n              </span>\n            </div>\n          </c8y-form-group>\n        </div>\n      </div>\n\n      <!-- SECURITY MODE -->\n      <div class=\"tight-grid\">\n        <div class=\"col-md-6\">\n          <div class=\"form-group\">\n            <!-- NONE, SIGN, SIGN & ENCRYPT-->\n            <label for=\"config.securityMode\" translate>Security mode</label>\n            <div class=\"c8y-select-wrapper\">\n              <select\n                class=\"form-control\"\n                id=\"config.securityMode\"\n                [(ngModel)]=\"currentSecMode\"\n                (ngModelChange)=\"setPolicy($event)\"\n                name=\"securityMode\"\n                required\n              >\n                <option *ngFor=\"let mode of securityModes\" [ngValue]=\"mode\">{{ mode }}</option>\n              </select>\n              <span></span>\n            </div>\n          </div>\n        </div>\n        <div *ngIf=\"currentSecMode === NONE\" class=\"col-md-6\">\n          <div class=\"form-group\">\n            <label for=\"config.securityPolicy\" translate>Security policy</label>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              id=\"config.securityPolicy\"\n              name=\"securityPolicy\"\n              [readonly]=\"true\"\n              [(ngModel)]=\"model.config.securityMode\"\n              required\n            />\n          </div>\n        </div>\n        <div *ngIf=\"currentSecMode !== NONE\" class=\"col-md-6\">\n          <div class=\"form-group\">\n            <label for=\"config.securityPolicy\" translate>Security policy</label>\n            <div class=\"c8y-select-wrapper\">\n              <select\n                *ngIf=\"currentSecMode === SIGN\"\n                class=\"form-control\"\n                id=\"config.securityPolicy\"\n                [(ngModel)]=\"model.config.securityMode\"\n                name=\"securityPolicy\"\n                required\n              >\n                <option *ngFor=\"let policy of securityPolicies.sign\" [ngValue]=\"policy\">{{\n                  policy\n                }}</option>\n              </select>\n              <select\n                *ngIf=\"currentSecMode === SIGN_ENC\"\n                class=\"form-control\"\n                id=\"config.securityPolicy\"\n                [(ngModel)]=\"model.config.securityMode\"\n                name=\"securityPolicy\"\n                required\n              >\n                <option *ngFor=\"let policy of securityPolicies.sign_enc\" [ngValue]=\"policy\">{{\n                  policy\n                }}</option>\n              </select>\n              <span></span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- AUTHENTICATION -->\n      <div class=\"form-group\">\n        <label for=\"config.authenticationMode\" translate>Authentication</label>\n        <div class=\"c8y-select-wrapper\">\n          <select\n            class=\"form-control\"\n            id=\"config.authenticationMode\"\n            [(ngModel)]=\"authenticationMode\"\n            name=\"authenticationMode\"\n            (ngModelChange)=\"updateAuthentication($event)\"\n            required\n          >\n            <option *ngFor=\"let auth of authenticationModes\" [ngValue]=\"auth\">{{\n              auth.value | translate\n            }}</option>\n          </select>\n          <span></span>\n        </div>\n      </div>\n\n      <!-- User/Pw-->\n      <div *ngIf=\"authenticationMode.id === 2\" class=\"tight-grid\">\n        <div class=\"col-md-6\">\n          <div class=\"form-group\">\n            <label for=\"config.userName\" translate>Username</label>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              id=\"config.userName\"\n              name=\"userName\"\n              placeholder=\"{{ 'e.g. joe.doe`LOCALIZE`' | translate }}\"\n              [(ngModel)]=\"model.config.userName\"\n              required\n            />\n          </div>\n        </div>\n        <div class=\"col-md-6\">\n          <div class=\"form-group\">\n            <label for=\"config.password\" translate>Password</label>\n            <input\n              type=\"password\"\n              class=\"form-control\"\n              id=\"config.userPassword\"\n              name=\"password\"\n              [(ngModel)]=\"model.config.userPassword\"\n              required\n            />\n          </div>\n        </div>\n      </div>\n      <!-- Key-based -->\n      <div *ngIf=\"authenticationMode.id === 3\" class=\"tight-grid\">\n        <!-- KEYSTORE PASSWORD -->\n        <div class=\"col-md-6\">\n          <div class=\"form-group\">\n            <label for=\"config.keystorePass\" translate>Keystore password</label>\n            <input\n              type=\"password\"\n              class=\"form-control\"\n              id=\"config.keystorePass\"\n              name=\"keystorePass\"\n              [(ngModel)]=\"model.config.keystorePass\"\n              required\n            />\n          </div>\n        </div>\n        <div class=\"col-md-6\">\n          <div class=\"form-group\">\n            <label for=\"config.certificatePass\" translate>Certificate password</label>\n            <input\n              type=\"password\"\n              class=\"form-control\"\n              id=\"config.certificatePass\"\n              name=\"keystorePass\"\n              [(ngModel)]=\"model.config.certificatePass\"\n              required\n            />\n          </div>\n        </div>\n        <!-- UPLOAD KEYSTORE -->\n        <div class=\"col-md-12\">\n          <div class=\"form-group\">\n            <label for=\"certificateUpload\" translate>Upload keystore</label>\n            <input\n              type=\"text\"\n              [readonly]=\"true\"\n              name=\"certificateUpload\"\n              class=\"form-control bottom-m-sm\"\n              [ngModel]=\"fileName\"\n              placeholder=\"{{ 'e.g.' | translate }} yourKeystore.jks\"\n              required\n            />\n            <c8y-drop-area\n              (dropped)=\"uploadFile($event)\"\n              [loadingMessage]=\"'Importing, please wait.' | translate\"\n              [title]=\"'Import keystore with jks file extension' | translate\"\n            >\n            </c8y-drop-area>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"card-footer separator text-center\">\n    <button title=\"{{ 'Cancel' | translate }}\" class=\"btn btn-default\" (click)=\"cancel()\" translate>\n      Cancel\n    </button>\n    <button title=\"{{ 'Remove' | translate }}\" class=\"btn btn-danger\" (click)=\"remove()\" translate>\n      Remove\n    </button>\n    <!-- Add [disabled]=\"method()\" when form is invalid-->\n    <button\n      title=\"{{ 'Save' | translate }}\"\n      class=\"btn btn-primary\"\n      (click)=\"save()\"\n      [disabled]=\"!opcuaConfigForm.valid\"\n      translate\n    >\n      Save\n    </button>\n  </div>\n</form>\n"
    })
], OpcuaServerConfigComponent);
export { OpcuaServerConfigComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BjdWEtc2VydmVyLWNvbmZpZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYzh5L25neC1jb21wb25lbnRzL3Byb3RvY29sLW9wY3VhLyIsInNvdXJjZXMiOlsib3BjdWEtc2VydmVyLWNvbmZpZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxZQUFZLEVBQWEsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3JHLE9BQU8sRUFBRSxPQUFPLEVBQWUsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUU5RSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQU05QyxJQUFhLDBCQUEwQixHQUF2QyxNQUFhLDBCQUEwQjtJQTRFckMsWUFBWSxZQUEwQjtRQTFFdEMsYUFBUSxHQUFXLEVBQUUsQ0FBQztRQUN0QiwwQkFBcUIsR0FBVyxHQUFHLENBQUM7UUFDcEMsc0JBQWlCLEdBQVcsQ0FBQyxDQUFDO1FBQzlCLDBCQUFxQixHQUFXLEVBQUUsQ0FBQztRQUd6QixhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQWUsQ0FBQztRQUMzQyxZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQWUsQ0FBQztRQUMxQyxVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQWUsQ0FBQztRQTBCbEQsU0FBSSxHQUFXLE1BQU0sQ0FBQztRQUN0QixTQUFJLEdBQVcsTUFBTSxDQUFDO1FBQ3RCLGFBQVEsR0FBVyxjQUFjLENBQUM7UUFDbEMscUJBQWdCLEdBQVE7WUFDdEIsSUFBSSxFQUFFO2dCQUNKLFlBQVksSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDdkIsaUJBQWlCLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQzVCLGtCQUFrQixJQUFJLENBQUMsSUFBSSxFQUFFO2FBQzlCO1lBQ0QsUUFB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WUFFUixLQUFLLGFBQWE7Z0JBQ2hCLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO2dCQUN6QyxNQUFNO1lBRVI7Z0JBQ0UsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7Z0JBQ3RDLE1BQU07U0FDVDtJQUNILENBQUM7Q0FDRixDQUFBOztZQS9OMkIsWUFBWTs7QUF0RVM7SUFBOUMsU0FBUyxDQUFDLGlCQUFpQixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQyxDQUFDO21FQUFzQjtBQUNyQjtJQUE5QyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsRUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFDLENBQUM7NERBQTZCO0FBQ2pFO0lBQVQsTUFBTSxFQUFFOzREQUE0QztBQUMzQztJQUFULE1BQU0sRUFBRTsyREFBMkM7QUFDMUM7SUFBVCxNQUFNLEVBQUU7eURBQXlDO0FBQ3pDO0lBQVIsS0FBSyxFQUFFO3dEQWVQO0FBMUJVLDBCQUEwQjtJQUp0QyxTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUscUJBQXFCO1FBQy9CLGszVkFBbUQ7S0FDcEQsQ0FBQztHQUNXLDBCQUEwQixDQTJTdEM7U0EzU1ksMEJBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgT25DaGFuZ2VzLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGdldHRleHQsIERyb3BwZWRGaWxlLCBEcm9wQXJlYUNvbXBvbmVudCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgT3BjdWFTZXJ2ZXIsIE9wY3VhU2VydmVyQ29uZmlnIH0gZnJvbSAnLi9vcGN1YS1zZXJ2ZXIuaW50ZXJmYWNlJztcbmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaC1lcyc7XG5pbXBvcnQgeyBPcGN1YVNlcnZpY2UgfSBmcm9tICcuL29wY3VhU2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ29wY3VhLXNlcnZlci1jb25maWcnLFxuICB0ZW1wbGF0ZVVybDogJy4vb3BjdWEtc2VydmVyLWNvbmZpZy5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgT3BjdWFTZXJ2ZXJDb25maWdDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gIGN1cnJlbnRTZWNNb2RlOiBzdHJpbmc7XG4gIGZpbGVOYW1lOiBzdHJpbmcgPSAnJztcbiAgdGFyZ2V0Q29ubmVjdGlvblN0YXRlOiBzdHJpbmcgPSAnMSc7XG4gIG1pbkludGVydmFsTnVtYmVyOiBudW1iZXIgPSAxO1xuICBjb25uZWN0aW9uU3RhdHVzTGFiZWw6IHN0cmluZyA9ICcnO1xuICBAVmlld0NoaWxkKCdvcGN1YUNvbmZpZ0Zvcm0nLCB7c3RhdGljOiBmYWxzZX0pIG9wY3VhQ29uZmlnRm9ybTogYW55O1xuICBAVmlld0NoaWxkKERyb3BBcmVhQ29tcG9uZW50LCB7c3RhdGljOiBmYWxzZX0pIGRyb3BBcmVhOiBEcm9wQXJlYUNvbXBvbmVudDtcbiAgQE91dHB1dCgpIGNhbmNlbGVkID0gbmV3IEV2ZW50RW1pdHRlcjxPcGN1YVNlcnZlcj4oKTtcbiAgQE91dHB1dCgpIHJlbW92ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPE9wY3VhU2VydmVyPigpO1xuICBAT3V0cHV0KCkgc2F2ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPE9wY3VhU2VydmVyPigpO1xuICBASW5wdXQoKSBzZXQgc2VydmVyKHNlcnZlcjogT3BjdWFTZXJ2ZXIpIHtcbiAgICBpZiAoc2VydmVyKSB7XG4gICAgICB0aGlzLl9zZXJ2ZXIgPSBjbG9uZURlZXAoc2VydmVyKTtcbiAgICAgIHRoaXMubW9kZWwgPSBjbG9uZURlZXAoc2VydmVyKTtcbiAgICAgIHRoaXMuZmlsZU5hbWUgPSB0aGlzLm1vZGVsLmNvbmZpZy5rZXlzdG9yZUZpbGVuYW1lO1xuXG4gICAgICBpZiAoc2VydmVyLmlkICYmIHNlcnZlci5pZCA9PT0gJ25ldycpIHtcbiAgICAgICAgLy8gZW5hYmxlZCBjb25uZWN0aW9uIHN0YXRlXG4gICAgICAgIHRoaXMudGFyZ2V0Q29ubmVjdGlvblN0YXRlID0gJzEnO1xuICAgICAgICB0aGlzLm1vZGVsLmNvbmZpZy50YXJnZXRDb25uZWN0aW9uU3RhdGUgPSAnZW5hYmxlZCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRhcmdldENvbm5lY3Rpb25TdGF0ZSA9ICh0aGlzLm1vZGVsLmNvbmZpZy50YXJnZXRDb25uZWN0aW9uU3RhdGUgPT09ICdlbmFibGVkJykgPyAnMScgOiAnMCc7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZUNvbm5lY3Rpb25TdGF0dXNMYWJlbCh0aGlzLl9zZXJ2ZXIpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzZXJ2ZXIoKTogT3BjdWFTZXJ2ZXIge1xuICAgIHJldHVybiB0aGlzLl9zZXJ2ZXI7XG4gIH1cblxuICBtb2RlbDogT3BjdWFTZXJ2ZXI7XG4gIHNlY3VyaXR5TW9kZXM6IHN0cmluZ1tdO1xuICBhdXRoZW50aWNhdGlvbk1vZGU6IGFueTtcbiAgYXV0aGVudGljYXRpb25Nb2RlczogYW55W107XG4gIE5PTkU6IHN0cmluZyA9ICdOT05FJztcbiAgU0lHTjogc3RyaW5nID0gJ1NJR04nO1xuICBTSUdOX0VOQzogc3RyaW5nID0gJ1NJR05fRU5DUllQVCc7XG4gIHNlY3VyaXR5UG9saWNpZXM6IGFueSA9IHtcbiAgICBzaWduOiBbXG4gICAgICBgQkFTSUMyNTZfJHt0aGlzLlNJR059YCxcbiAgICAgIGBCQVNJQzEyOFJTQTE1XyR7dGhpcy5TSUdOfWAsXG4gICAgICBgQkFTSUMyNTZTSEEyNTZfJHt0aGlzLlNJR059YFxuICAgIF0sXG4gICAgc2lnbl9lbmM6IFtcbiAgICAgIGBCQVNJQzI1Nl8ke3RoaXMuU0lHTl9FTkN9YCxcbiAgICAgIGBCQVNJQzEyOFJTQTE1XyR7dGhpcy5TSUdOX0VOQ31gLFxuICAgICAgYEJBU0lDMjU2U0hBMjU2XyR7dGhpcy5TSUdOX0VOQ31gLFxuICAgIF1cbiAgfTtcblxuICBwcml2YXRlIEFOT05ZTSA9IHtcbiAgICBpZDogMSxcbiAgICB2YWx1ZTogZ2V0dGV4dCgnQW5vbnltb3VzJylcbiAgfTtcbiAgcHJpdmF0ZSBVU0VSX1BBU1NXT1JEID0ge1xuICAgIGlkOiAyLFxuICAgIHZhbHVlOiBnZXR0ZXh0KCdVc2VybmFtZS9QYXNzd29yZCcpXG4gIH07XG4gIHByaXZhdGUgS0VZX0JBU0VEID0ge1xuICAgIGlkOiAzLFxuICAgIHZhbHVlOiBnZXR0ZXh0KCdLZXktYmFzZWQgQXV0aGVudGljYXRpb24nKVxuICB9O1xuICBwcml2YXRlIF9zZXJ2ZXI6IE9wY3VhU2VydmVyO1xuICBwcml2YXRlIG9wY3VhU2VydmljZTogT3BjdWFTZXJ2aWNlO1xuICBwcml2YXRlIGluaXRpYWxLZXlzdG9yZTogRmlsZSA9IHtcbiAgICBsYXN0TW9kaWZpZWQ6IDAsXG4gICAgbmFtZTogJycsXG4gICAgdHlwZTogJycsXG4gICAgc2xpY2U6IG51bGwsXG4gICAgc2l6ZTogMFxuICB9O1xuICBwcml2YXRlIGtleXN0b3JlOiBGaWxlID0gdGhpcy5pbml0aWFsS2V5c3RvcmU7XG4gIHByaXZhdGUgYXV0aFN3aXRjaDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKG9wY3VhU2VydmljZTogT3BjdWFTZXJ2aWNlKSB7XG4gICAgdGhpcy5vcGN1YVNlcnZpY2UgPSBvcGN1YVNlcnZpY2U7XG4gIH1cblxuICBhc3luYyBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmF1dGhTd2l0Y2ggPSBmYWxzZTtcblxuICAgIHRoaXMuc2VjdXJpdHlNb2RlcyA9IFtcbiAgICAgIHRoaXMuTk9ORSxcbiAgICAgIHRoaXMuU0lHTixcbiAgICAgIHRoaXMuU0lHTl9FTkNcbiAgICBdO1xuXG4gICAgdGhpcy5hdXRoZW50aWNhdGlvbk1vZGVzID0gW1xuICAgICAgdGhpcy5BTk9OWU0sXG4gICAgICB0aGlzLlVTRVJfUEFTU1dPUkQsXG4gICAgICB0aGlzLktFWV9CQVNFRFxuICAgIF07XG5cbiAgICB0aGlzLnNldEN1cnJlbnRBdXRoZW50aWNhdGlvbk1vZGUoKTtcbiAgICB0aGlzLnNldEN1cnJlbnRTZWN1cml0eU1vZGUoKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKCkge1xuICAgIHRoaXMuc2V0Q3VycmVudFNlY3VyaXR5TW9kZSgpO1xuICAgIHRoaXMuc2V0Q3VycmVudEF1dGhlbnRpY2F0aW9uTW9kZSgpO1xuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIHRoaXMuY2FuY2VsZWQuZW1pdCh0aGlzLm1vZGVsKTtcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZSgpIHtcbiAgICBhd2FpdCB0aGlzLnJlbW92ZUtleXN0b3JlKHRoaXMubW9kZWwpO1xuICAgIHRoaXMucmVtb3ZlZC5lbWl0KHRoaXMubW9kZWwpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZSgpIHtcbiAgICBpZiAodGhpcy5rZXlzdG9yZSAmJiB0aGlzLmtleXN0b3JlLnNpemUgPiAwICYmIHRoaXMua2V5c3RvcmUubmFtZSAmJiB0aGlzLmtleXN0b3JlLm5hbWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnVwbG9hZEtleXN0b3JlKHRoaXMubW9kZWwuY29uZmlnLmtleXN0b3JlQmluYXJ5SWQpO1xuXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmlkKSB7XG4gICAgICAgIHRoaXMubW9kZWwuY29uZmlnLmtleXN0b3JlQmluYXJ5SWQgPSByZXNwb25zZS5kYXRhLmlkO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiB0aGUga2V5c3RvcmUgd2FzIHVwbG9hZGVkIHN1Y2Nlc3NmdWwgd2UgY2FuIHJlbW92ZVxuICAgICAgLy8gdGhlIGxvY2FsIGtleXN0b3JlLiBUaGlzIHdpbGwgcHJldmVudCBhbm90aGVyIHJlcXVlc3QgdG8gYmluYXJ5IGFwaVxuICAgICAgLy8gd2hlbiB0aGUgdXNlciB3aWxsIGVkaXQgb3RoZXIgaW5wdXRzIGluIHRoZSBmb3JtIGFuZCBoaXQgc2F2ZSBhZ2Fpbi5cbiAgICAgIHRoaXMua2V5c3RvcmUgPSB0aGlzLmluaXRpYWxLZXlzdG9yZTtcbiAgICB9XG5cbiAgICAvLyB3aWxsIHJlbW92ZSBrZXlzdG9yZSAoYmluYXJ5KSB3aGVuIHRoZSB1c2VyIHN3aXRjaGVkXG4gICAgLy8gYXV0aGVudGljYXRpb24gc2V0dGluZ3MgZnJvbSBrZXktYmFzZWQgdG8gYW5vbnltb3VzIG9yIHVzZXJuYW1lL3Bhc3N3b3JkXG4gICAgaWYgKHRoaXMuYXV0aFN3aXRjaCkge1xuICAgICAgdGhpcy5yZW1vdmVLZXlzdG9yZSh0aGlzLnNlcnZlcik7XG4gICAgfVxuXG4gICAgdGhpcy5zYXZlZC5lbWl0KHRoaXMubW9kZWwpO1xuICB9XG5cbiAgdXBsb2FkRmlsZShkcm9wcGVkRmlsZXM6IERyb3BwZWRGaWxlW10pIHtcbiAgICBpZiAoZHJvcHBlZEZpbGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5rZXlzdG9yZSA9IGRyb3BwZWRGaWxlc1swXS5maWxlO1xuICAgICAgdGhpcy5maWxlTmFtZSA9IHRoaXMua2V5c3RvcmUubmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZHJvcHBlZCBtb3JlIHRoYW4gb25lIGZpbGVcbiAgICAgIGNvbnNvbGUud2FybignVHJpZWQgdG8gaW1wb3J0Li4uIEltcG9ydCBhYm9ydGVkLicpO1xuICAgIH1cbiAgfVxuXG4gIHNldFBvbGljeShkYXRhOiBhbnkpIHtcbiAgICBpZiAoZGF0YSA9PT0gdGhpcy5OT05FKSB7XG4gICAgICB0aGlzLm1vZGVsLmNvbmZpZy5zZWN1cml0eU1vZGUgPSB0aGlzLk5PTkU7XG4gICAgfSBlbHNlIGlmIChkYXRhID09PSB0aGlzLlNJR04pIHtcbiAgICAgIHRoaXMubW9kZWwuY29uZmlnLnNlY3VyaXR5TW9kZSA9IHRoaXMuc2VjdXJpdHlQb2xpY2llcy5zaWduWzBdO1xuICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gdGhpcy5TSUdOX0VOQykge1xuICAgICAgdGhpcy5tb2RlbC5jb25maWcuc2VjdXJpdHlNb2RlID0gdGhpcy5zZWN1cml0eVBvbGljaWVzLnNpZ25fZW5jWzBdO1xuICAgIH1cbiAgfVxuXG4gIHNldFNlcnZlckNvbm5lY3Rpb24oZGF0YTogc3RyaW5nKSB7XG4gICAgdGhpcy5tb2RlbC5jb25maWcudGFyZ2V0Q29ubmVjdGlvblN0YXRlID0gKGRhdGEgIT09ICcwJykgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnO1xuICB9XG5cbiAgdXBkYXRlQXV0aGVudGljYXRpb24oZGF0YTogYW55KSB7XG4gICAgaWYgKGRhdGEgJiYgZGF0YS5pZCkge1xuICAgICAgc3dpdGNoIChkYXRhLmlkKSB7XG4gICAgICAgIC8vIEFub255bW91c1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdGhpcy5yZXNldFVzZXJBdXRoZW50aWNhdGlvbigpO1xuICAgICAgICAgIHRoaXMucmVzZXRLZXlCYXNlZEF1dGhlbnRpY2F0aW9uKCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgLy8gVXNlci9QYXNzd29yZFxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgdGhpcy5yZXNldEtleUJhc2VkQXV0aGVudGljYXRpb24oKTtcbiAgICAgICAgICB0aGlzLnJlc3RvcmVVc2VyRGF0YSgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIC8vIEtleS1iYXNlZFxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgdGhpcy5yZXNldFVzZXJBdXRoZW50aWNhdGlvbigpO1xuICAgICAgICAgIHRoaXMucmVzdG9yZUtleUJhc2VkRGF0YSgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIGF1dGhlbnRpY2F0aW9uIGlkJywgZGF0YS5pZCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQ29ubmVjdGlvblN0YXR1c0xhYmVsKHNlcnZlcikge1xuICAgIGNvbnN0IGNvbm5lY3RlZCA9IHNlcnZlci5jOHlfQ29ubmVjdGlvbiAmJiBzZXJ2ZXIuYzh5X0Nvbm5lY3Rpb24uc3RhdHVzID09PSAnQ09OTkVDVEVEJztcbiAgICBjb25zdCBsYWJlbCA9IGNvbm5lY3RlZCA/IGdldHRleHQoJ0Nvbm5lY3RlZCcpIDogZ2V0dGV4dCgnRGlzY29ubmVjdGVkJyk7XG4gICAgdGhpcy5jb25uZWN0aW9uU3RhdHVzTGFiZWwgPSBsYWJlbDtcbiAgfVxuXG4gIHByaXZhdGUgdXBsb2FkS2V5c3RvcmUoYmluYXJ5SWQ/OiBzdHJpbmcpIHtcbiAgICBpZiAoIWJpbmFyeUlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcGN1YVNlcnZpY2UudXBsb2FkS2V5c3RvcmUodGhpcy5rZXlzdG9yZSk7XG4gICAgfSBlbHNlIGlmIChiaW5hcnlJZCAmJiBiaW5hcnlJZC5sZW5ndGggPiAwKSB7XG4gICAgICAvLyB1cGRhdGUgZXhpc3RpbmcgYmluYXJ5XG4gICAgICByZXR1cm4gdGhpcy5vcGN1YVNlcnZpY2UudXBkYXRlS2V5c3RvcmUoYmluYXJ5SWQsIHRoaXMua2V5c3RvcmUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlS2V5c3RvcmUoc2VydmVyOiBPcGN1YVNlcnZlcikge1xuICAgIGlmIChzZXJ2ZXIgJiZcbiAgICAgIHNlcnZlci5jb25maWcgJiZcbiAgICAgIHNlcnZlci5jb25maWcua2V5c3RvcmVCaW5hcnlJZCAmJlxuICAgICAgc2VydmVyLmNvbmZpZy5rZXlzdG9yZUJpbmFyeUlkLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYXV0aFN3aXRjaCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXMub3BjdWFTZXJ2aWNlLnJlbW92ZUtleXN0b3JlKHRoaXMuc2VydmVyLmNvbmZpZy5rZXlzdG9yZUJpbmFyeUlkKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlc2V0VXNlckF1dGhlbnRpY2F0aW9uKCkge1xuICAgIHRoaXMubW9kZWwuY29uZmlnLnVzZXJOYW1lID0gbnVsbDtcbiAgICB0aGlzLm1vZGVsLmNvbmZpZy51c2VyUGFzc3dvcmQgPSBudWxsO1xuICAgIHRoaXMubW9kZWwuY29uZmlnLnVzZXJJZGVudGl0eU1vZGUgPSAnbm9uZSc7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0S2V5QmFzZWRBdXRoZW50aWNhdGlvbigpIHtcbiAgICB0aGlzLmF1dGhTd2l0Y2ggPSB0cnVlO1xuXG4gICAgdGhpcy5tb2RlbC5jb25maWcua2V5c3RvcmVQYXNzID0gbnVsbDtcbiAgICB0aGlzLm1vZGVsLmNvbmZpZy5jZXJ0aWZpY2F0ZVBhc3MgPSBudWxsO1xuICAgIHRoaXMubW9kZWwuY29uZmlnLmtleXN0b3JlQmluYXJ5SWQgPSAnJztcbiAgICB0aGlzLm1vZGVsLmNvbmZpZy5rZXlzdG9yZUZpbGVuYW1lID0gJyc7XG4gICAgdGhpcy5tb2RlbC5jb25maWcudXNlcklkZW50aXR5TW9kZSA9ICdub25lJztcbiAgfVxuXG4gIHByaXZhdGUgcmVzdG9yZVVzZXJEYXRhKCkge1xuICAgIHRoaXMubW9kZWwuY29uZmlnLnVzZXJOYW1lID0gdGhpcy5fc2VydmVyLmNvbmZpZy51c2VyTmFtZTtcbiAgICB0aGlzLm1vZGVsLmNvbmZpZy51c2VyUGFzc3dvcmQgPSB0aGlzLl9zZXJ2ZXIuY29uZmlnLnVzZXJQYXNzd29yZDtcbiAgICB0aGlzLm1vZGVsLmNvbmZpZy51c2VySWRlbnRpdHlNb2RlID0gJ3VzZXJBbmRQYXNzd29yZCc7XG4gIH1cblxuICBwcml2YXRlIHJlc3RvcmVLZXlCYXNlZERhdGEoKSB7XG4gICAgdGhpcy5hdXRoU3dpdGNoID0gZmFsc2U7XG4gICAgdGhpcy5tb2RlbC5jb25maWcua2V5c3RvcmVQYXNzID0gdGhpcy5fc2VydmVyLmNvbmZpZy5rZXlzdG9yZVBhc3M7XG4gICAgdGhpcy5tb2RlbC5jb25maWcuY2VydGlmaWNhdGVQYXNzID0gdGhpcy5fc2VydmVyLmNvbmZpZy5jZXJ0aWZpY2F0ZVBhc3M7XG4gICAgdGhpcy5tb2RlbC5jb25maWcua2V5c3RvcmVCaW5hcnlJZCA9IHRoaXMuX3NlcnZlci5jb25maWcua2V5c3RvcmVCaW5hcnlJZDtcbiAgICB0aGlzLm1vZGVsLmNvbmZpZy5rZXlzdG9yZUZpbGVuYW1lID0gdGhpcy5fc2VydmVyLmNvbmZpZy5rZXlzdG9yZUZpbGVuYW1lO1xuICAgIHRoaXMubW9kZWwuY29uZmlnLnVzZXJJZGVudGl0eU1vZGUgPSAnY2VydGlmaWNhdGUnO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTZXJ2ZXJDb25maWcoKTogT3BjdWFTZXJ2ZXJDb25maWcge1xuICAgIGxldCBjZmc6IE9wY3VhU2VydmVyQ29uZmlnID0ge1xuICAgICAgc2VjdXJpdHlNb2RlOiB0aGlzLk5PTkUsXG4gICAgICB1c2VySWRlbnRpdHlNb2RlOiAnbm9uZSdcbiAgICB9O1xuICAgIGlmICh0aGlzLnNlcnZlciAmJiB0aGlzLnNlcnZlci5jb25maWcpIHtcbiAgICAgIGNmZyA9IHRoaXMuc2VydmVyLmNvbmZpZztcbiAgICB9XG4gICAgcmV0dXJuIGNmZztcbiAgfVxuXG4gIHByaXZhdGUgc2V0Q3VycmVudFNlY3VyaXR5TW9kZSgpIHtcbiAgICBjb25zdCB7IHNlY3VyaXR5TW9kZSB9ID0gdGhpcy5nZXRTZXJ2ZXJDb25maWcoKTtcbiAgICBpZiAoc2VjdXJpdHlNb2RlKSB7XG4gICAgICBjb25zdCBmb3VuZEluU2lnbiA9IHRoaXMuc2VjdXJpdHlQb2xpY2llcy5zaWduLmZpbmQoKGVsKSA9PiBlbCA9PT0gc2VjdXJpdHlNb2RlKTtcbiAgICAgIGlmIChmb3VuZEluU2lnbikge1xuICAgICAgICB0aGlzLmN1cnJlbnRTZWNNb2RlID0gdGhpcy5TSUdOO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZm91bmRJblNpZ25FbmNyeXB0ID0gdGhpcy5zZWN1cml0eVBvbGljaWVzLnNpZ25fZW5jLmZpbmQoKGVsKSA9PiBlbCA9PT0gc2VjdXJpdHlNb2RlKTtcbiAgICAgICAgZm91bmRJblNpZ25FbmNyeXB0ID8gdGhpcy5jdXJyZW50U2VjTW9kZSA9IHRoaXMuU0lHTl9FTkMgOiB0aGlzLmN1cnJlbnRTZWNNb2RlID0gdGhpcy5OT05FO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0Q3VycmVudEF1dGhlbnRpY2F0aW9uTW9kZSgpIHtcbiAgICBjb25zdCB7XG4gICAgICB1c2VySWRlbnRpdHlNb2RlXG4gICAgfSA9IHRoaXMuZ2V0U2VydmVyQ29uZmlnKCk7XG5cbiAgICBzd2l0Y2ggKHVzZXJJZGVudGl0eU1vZGUpIHtcbiAgICAgIGNhc2UgJ2NlcnRpZmljYXRlJzpcbiAgICAgICAgdGhpcy5hdXRoZW50aWNhdGlvbk1vZGUgPSB0aGlzLktFWV9CQVNFRDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3VzZXJBbmRQYXNzd29yZCc6XG4gICAgICAgIHRoaXMuYXV0aGVudGljYXRpb25Nb2RlID0gdGhpcy5VU0VSX1BBU1NXT1JEO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnQW5vbnltb3VzJzpcbiAgICAgICAgdGhpcy5hdXRoZW50aWNhdGlvbk1vZGUgPSB0aGlzLkFOT05ZTTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ1VzZXJOYW1lJzpcbiAgICAgICAgdGhpcy5hdXRoZW50aWNhdGlvbk1vZGUgPSB0aGlzLlVTRVJfUEFTU1dPUkQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdDZXJ0aWZpY2F0ZSc6XG4gICAgICAgIHRoaXMuYXV0aGVudGljYXRpb25Nb2RlID0gdGhpcy5LRVlfQkFTRUQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLmF1dGhlbnRpY2F0aW9uTW9kZSA9IHRoaXMuQU5PTllNO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbiJdfQ==