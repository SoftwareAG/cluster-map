import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { OptionsService } from '@c8y/ngx-components';
let TrustedCertificatesGuard = class TrustedCertificatesGuard {
    constructor(optionsService) {
        this.optionsService = optionsService;
    }
    canActivate(route, state) {
        return this.isFeatureEnabled();
    }
    isFeatureEnabled() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            if (this.isFeatureEnabledCache === undefined) {
                this.isFeatureEnabledCache = (yield this.optionsService.getTenantOption('oauth.internal.token', 'trusted-certificates.enabled', false));
            }
            return this.isFeatureEnabledCache;
        });
    }
};
TrustedCertificatesGuard.ctorParameters = () => [
    { type: OptionsService }
];
TrustedCertificatesGuard = tslib_1.__decorate([
    Injectable()
], TrustedCertificatesGuard);
export { TrustedCertificatesGuard };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJ1c3RlZC1jZXJ0aWZpY2F0ZXMuZ3VhcmQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYzh5L25neC1jb21wb25lbnRzL3RydXN0ZWQtY2VydGlmaWNhdGVzLyIsInNvdXJjZXMiOlsidHJ1c3RlZC1jZXJ0aWZpY2F0ZXMuZ3VhcmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFM0MsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBR3JELElBQWEsd0JBQXdCLEdBQXJDLE1BQWEsd0JBQXdCO0lBRW5DLFlBQW9CLGNBQThCO1FBQTlCLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtJQUFHLENBQUM7SUFFdEQsV0FBVyxDQUFDLEtBQTZCLEVBQUUsS0FBMEI7UUFDbkUsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0lBRUssZ0JBQWdCOztZQUNwQixJQUFJLElBQUksQ0FBQyxxQkFBcUIsS0FBSyxTQUFTLEVBQUU7Z0JBQzVDLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQ3JFLHNCQUFzQixFQUN0Qiw4QkFBOEIsRUFDOUIsS0FBSyxDQUNOLENBQVksQ0FBQzthQUNmO1lBQ0QsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUM7UUFDcEMsQ0FBQztLQUFBO0NBQ0YsQ0FBQTs7WUFoQnFDLGNBQWM7O0FBRnZDLHdCQUF3QjtJQURwQyxVQUFVLEVBQUU7R0FDQSx3QkFBd0IsQ0FrQnBDO1NBbEJZLHdCQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlU25hcHNob3QsIENhbkFjdGl2YXRlLCBSb3V0ZXJTdGF0ZVNuYXBzaG90IH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IE9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBUcnVzdGVkQ2VydGlmaWNhdGVzR3VhcmQgaW1wbGVtZW50cyBDYW5BY3RpdmF0ZSB7XG4gIHByaXZhdGUgaXNGZWF0dXJlRW5hYmxlZENhY2hlOiBib29sZWFuO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG9wdGlvbnNTZXJ2aWNlOiBPcHRpb25zU2VydmljZSkge31cblxuICBjYW5BY3RpdmF0ZShyb3V0ZTogQWN0aXZhdGVkUm91dGVTbmFwc2hvdCwgc3RhdGU6IFJvdXRlclN0YXRlU25hcHNob3QpIHtcbiAgICByZXR1cm4gdGhpcy5pc0ZlYXR1cmVFbmFibGVkKCk7XG4gIH1cblxuICBhc3luYyBpc0ZlYXR1cmVFbmFibGVkKCkge1xuICAgIGlmICh0aGlzLmlzRmVhdHVyZUVuYWJsZWRDYWNoZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmlzRmVhdHVyZUVuYWJsZWRDYWNoZSA9IChhd2FpdCB0aGlzLm9wdGlvbnNTZXJ2aWNlLmdldFRlbmFudE9wdGlvbihcbiAgICAgICAgJ29hdXRoLmludGVybmFsLnRva2VuJyxcbiAgICAgICAgJ3RydXN0ZWQtY2VydGlmaWNhdGVzLmVuYWJsZWQnLFxuICAgICAgICBmYWxzZVxuICAgICAgKSkgYXMgYm9vbGVhbjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaXNGZWF0dXJlRW5hYmxlZENhY2hlO1xuICB9XG59XG4iXX0=