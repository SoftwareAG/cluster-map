import * as tslib_1 from "tslib";
import { HttpClient, HttpClientModule } from '@angular/common/http';
import { LOCALE_ID, NgModule } from '@angular/core';
import { MissingTranslationHandler, TranslateService as NgxTranslateService, TranslateCompiler, TranslateFakeCompiler, TranslateLoader, TranslateModule, TranslateParser, TranslateStore, USE_DEFAULT_LANG, USE_STORE, USE_EXTEND, DEFAULT_LANGUAGE } from '@ngx-translate/core';
import { OptionsService } from '../common/public-api';
import { AppStateService } from '../common/ui-state.service';
import { LANGUAGES } from './languages';
import { LOCALE_PATH } from './locale.path';
import { MissingTranslationCustomHandler } from './missing-translation-custom.handler';
import { MESSAGES } from './pattern-messages.data';
import { HOOK_PATTERN_MESSAGES } from './patterns-message.hook';
import { TranslateCustomLoader } from './translate.loader';
import { TranslateParserCustom } from './translate.parser';
// Load these as a side effect
try {
    // tslint:disable:no-var-requires
    require('@c8y/ngx-components/locales/de.po');
    require('@c8y/ngx-components/locales/en.po');
    require('@c8y/ngx-components/locales/es.po');
    require('@c8y/ngx-components/locales/fr.po');
    require('@c8y/ngx-components/locales/ja_JP.po');
    // tslint:enable:no-var-requires
}
catch (e) {
    // empty block
}
// AoT requires an exported function for factories
export function translateLoaderFactory(httpClient, localePath, languages) {
    return new TranslateCustomLoader(httpClient, localePath, languages);
}
export function localePathFactory(options) {
    return options.localePath;
}
export function languagesFactory(options) {
    return options.languages;
}
export function localeId(appStateService) {
    return {
        get lang() {
            return appStateService.state.lang || 'en';
        },
        toLowerCase: function () {
            return this.lang;
        },
        toString: function () {
            return this.lang;
        }
    };
}
/**
 * The angular module definition for i18n (translation).
 * @exports I18nModule
 */
var I18nModule = /** @class */ (function () {
    function I18nModule() {
    }
    I18nModule_1 = I18nModule;
    I18nModule.providers = function () {
        return [
            { provide: LOCALE_ID, useFactory: localeId, deps: [AppStateService] },
            { provide: HOOK_PATTERN_MESSAGES, useValue: MESSAGES, multi: true },
            { provide: LOCALE_PATH, useFactory: localePathFactory, deps: [OptionsService] },
            { provide: LANGUAGES, useFactory: languagesFactory, deps: [OptionsService] },
            // Extracted from projects/ngx-translate/core/src/public_api.ts
            { provide: TranslateLoader, useFactory: translateLoaderFactory, deps: [HttpClient, LOCALE_PATH, LANGUAGES] },
            { provide: TranslateCompiler, useClass: TranslateFakeCompiler },
            { provide: TranslateParser, useClass: TranslateParserCustom },
            { provide: MissingTranslationHandler, useClass: MissingTranslationCustomHandler },
            TranslateStore,
            NgxTranslateService,
            { provide: USE_STORE, useValue: undefined },
            { provide: USE_DEFAULT_LANG, useValue: undefined },
            { provide: USE_EXTEND, useValue: false },
            { provide: DEFAULT_LANGUAGE, useValue: undefined },
        ];
    };
    I18nModule.forRoot = function () {
        return {
            ngModule: I18nModule_1,
            providers: I18nModule_1.providers()
        };
    };
    var I18nModule_1;
    I18nModule = I18nModule_1 = tslib_1.__decorate([
        NgModule({
            exports: [TranslateModule],
            imports: [HttpClientModule]
        })
    ], I18nModule);
    return I18nModule;
}());
export { I18nModule };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaTE4bi5tb2R1bGUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYzh5L25neC1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsiY29yZS9pMThuL2kxOG4ubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDcEUsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDcEQsT0FBTyxFQUNMLHlCQUF5QixFQUN6QixnQkFBZ0IsSUFBSSxtQkFBbUIsRUFDdkMsaUJBQWlCLEVBQ2pCLHFCQUFxQixFQUNyQixlQUFlLEVBQ2YsZUFBZSxFQUNmLGVBQWUsRUFDZixjQUFjLEVBQ2QsZ0JBQWdCLEVBQ2hCLFNBQVMsRUFDVCxVQUFVLEVBQ1YsZ0JBQWdCLEVBQ2pCLE1BQU0scUJBQXFCLENBQUM7QUFDN0IsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUM3RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3hDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDNUMsT0FBTyxFQUFFLCtCQUErQixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFDdkYsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ25ELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQzNELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRTNELDhCQUE4QjtBQUM5QixJQUFJO0lBQ0YsaUNBQWlDO0lBQ2pDLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO0lBQzdDLE9BQU8s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RUFBRSxDQUFFLGdCQUFnQixDQUFFO1NBQzlCLENBQUM7T0FDVyxVQUFVLENBMkJ0QjtJQUFELGlCQUFDO0NBQUEsQUEzQkQsSUEyQkM7U0EzQlksVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBDbGllbnRNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBMT0NBTEVfSUQsIE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBNaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyLFxuICBUcmFuc2xhdGVTZXJ2aWNlIGFzIE5neFRyYW5zbGF0ZVNlcnZpY2UsXG4gIFRyYW5zbGF0ZUNvbXBpbGVyLFxuICBUcmFuc2xhdGVGYWtlQ29tcGlsZXIsXG4gIFRyYW5zbGF0ZUxvYWRlcixcbiAgVHJhbnNsYXRlTW9kdWxlLFxuICBUcmFuc2xhdGVQYXJzZXIsXG4gIFRyYW5zbGF0ZVN0b3JlLFxuICBVU0VfREVGQVVMVF9MQU5HLFxuICBVU0VfU1RPUkUsXG4gIFVTRV9FWFRFTkQsXG4gIERFRkFVTFRfTEFOR1VBR0Vcbn0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XG5pbXBvcnQgeyBPcHRpb25zU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9wdWJsaWMtYXBpJztcbmltcG9ydCB7IEFwcFN0YXRlU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi91aS1zdGF0ZS5zZXJ2aWNlJztcbmltcG9ydCB7IExBTkdVQUdFUyB9IGZyb20gJy4vbGFuZ3VhZ2VzJztcbmltcG9ydCB7IExPQ0FMRV9QQVRIIH0gZnJvbSAnLi9sb2NhbGUucGF0aCc7XG5pbXBvcnQgeyBNaXNzaW5nVHJhbnNsYXRpb25DdXN0b21IYW5kbGVyIH0gZnJvbSAnLi9taXNzaW5nLXRyYW5zbGF0aW9uLWN1c3RvbS5oYW5kbGVyJztcbmltcG9ydCB7IE1FU1NBR0VTIH0gZnJvbSAnLi9wYXR0ZXJuLW1lc3NhZ2VzLmRhdGEnO1xuaW1wb3J0IHsgSE9PS19QQVRURVJOX01FU1NBR0VTIH0gZnJvbSAnLi9wYXR0ZXJucy1tZXNzYWdlLmhvb2snO1xuaW1wb3J0IHsgVHJhbnNsYXRlQ3VzdG9tTG9hZGVyIH0gZnJvbSAnLi90cmFuc2xhdGUubG9hZGVyJztcbmltcG9ydCB7IFRyYW5zbGF0ZVBhcnNlckN1c3RvbSB9IGZyb20gJy4vdHJhbnNsYXRlLnBhcnNlcic7XG5cbi8vIExvYWQgdGhlc2UgYXMgYSBzaWRlIGVmZmVjdFxudHJ5IHtcbiAgLy8gdHNsaW50OmRpc2FibGU6bm8tdmFyLXJlcXVpcmVzXG4gIHJlcXVpcmUoJ0BjOHkvbmd4LWNvbXBvbmVudHMvbG9jYWxlcy9kZS5wbycpO1xuICByZXF1aXJlKCdAYzh5L25neC1jb21wb25lbnRzL2xvY2FsZXMvZW4ucG8nKTtcbiAgcmVxdWlyZSgnQGM4eS9uZ3gtY29tcG9uZW50cy9sb2NhbGVzL2VzLnBvJyk7XG4gIHJlcXVpcmUoJ0BjOHkvbmd4LWNvbXBvbmVudHMvbG9jYWxlcy9mci5wbycpO1xuICByZXF1aXJlKCdAYzh5L25neC1jb21wb25lbnRzL2xvY2FsZXMvamFfSlAucG8nKTtcbiAgIC8vIHRzbGludDplbmFibGU6bm8tdmFyLXJlcXVpcmVzXG59IGNhdGNoIChlKSB7XG4gIC8vIGVtcHR5IGJsb2NrXG59XG5cbi8vIEFvVCByZXF1aXJlcyBhbiBleHBvcnRlZCBmdW5jdGlvbiBmb3IgZmFjdG9yaWVzXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlTG9hZGVyRmFjdG9yeShodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBsb2NhbGVQYXRoOiBzdHJpbmcsIGxhbmd1YWdlczogYW55KSB7XG4gIHJldHVybiBuZXcgVHJhbnNsYXRlQ3VzdG9tTG9hZGVyKGh0dHBDbGllbnQsIGxvY2FsZVBhdGgsIGxhbmd1YWdlcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2NhbGVQYXRoRmFjdG9yeShvcHRpb25zOiBPcHRpb25zU2VydmljZSkge1xuICByZXR1cm4gb3B0aW9ucy5sb2NhbGVQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGFuZ3VhZ2VzRmFjdG9yeShvcHRpb25zOiBPcHRpb25zU2VydmljZSkge1xuICByZXR1cm4gb3B0aW9ucy5sYW5ndWFnZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2NhbGVJZChhcHBTdGF0ZVNlcnZpY2U6IEFwcFN0YXRlU2VydmljZSkge1xuICByZXR1cm4ge1xuICAgIGdldCBsYW5nKCkge1xuICAgICAgcmV0dXJuIGFwcFN0YXRlU2VydmljZS5zdGF0ZS5sYW5nIHx8ICdlbic7XG4gICAgfSxcbiAgICB0b0xvd2VyQ2FzZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmxhbmc7XG4gICAgfSxcbiAgICB0b1N0cmluZygpIHtcbiAgICAgIHJldHVybiB0aGlzLmxhbmc7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFRoZSBhbmd1bGFyIG1vZHVsZSBkZWZpbml0aW9uIGZvciBpMThuICh0cmFuc2xhdGlvbikuXG4gKiBAZXhwb3J0cyBJMThuTW9kdWxlXG4gKi9cbkBOZ01vZHVsZSh7XG4gIGV4cG9ydHM6IFsgVHJhbnNsYXRlTW9kdWxlIF0sXG4gIGltcG9ydHM6IFsgSHR0cENsaWVudE1vZHVsZSBdXG59KVxuZXhwb3J0IGNsYXNzIEkxOG5Nb2R1bGUge1xuICBzdGF0aWMgcHJvdmlkZXJzKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7IHByb3ZpZGU6IExPQ0FMRV9JRCwgdXNlRmFjdG9yeTogbG9jYWxlSWQsIGRlcHM6IFsgQXBwU3RhdGVTZXJ2aWNlIF0gfSxcbiAgICAgIHsgcHJvdmlkZTogSE9PS19QQVRURVJOX01FU1NBR0VTLCB1c2VWYWx1ZTogTUVTU0FHRVMsIG11bHRpOiB0cnVlIH0sXG4gICAgICB7IHByb3ZpZGU6IExPQ0FMRV9QQVRILCB1c2VGYWN0b3J5OiBsb2NhbGVQYXRoRmFjdG9yeSwgZGVwczogWyBPcHRpb25zU2VydmljZSBdIH0sXG4gICAgICB7IHByb3ZpZGU6IExBTkdVQUdFUywgdXNlRmFjdG9yeTogbGFuZ3VhZ2VzRmFjdG9yeSwgZGVwczogWyBPcHRpb25zU2VydmljZSBdIH0sXG5cbiAgICAgIC8vIEV4dHJhY3RlZCBmcm9tIHByb2plY3RzL25neC10cmFuc2xhdGUvY29yZS9zcmMvcHVibGljX2FwaS50c1xuICAgICAgeyBwcm92aWRlOiBUcmFuc2xhdGVMb2FkZXIsIHVzZUZhY3Rvcnk6IHRyYW5zbGF0ZUxvYWRlckZhY3RvcnksIGRlcHM6IFtIdHRwQ2xpZW50LCBMT0NBTEVfUEFUSCwgTEFOR1VBR0VTXSB9LFxuICAgICAgeyBwcm92aWRlOiBUcmFuc2xhdGVDb21waWxlciwgdXNlQ2xhc3M6IFRyYW5zbGF0ZUZha2VDb21waWxlciB9LFxuICAgICAgeyBwcm92aWRlOiBUcmFuc2xhdGVQYXJzZXIsIHVzZUNsYXNzOiBUcmFuc2xhdGVQYXJzZXJDdXN0b20gfSxcbiAgICAgIHsgcHJvdmlkZTogTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlciwgdXNlQ2xhc3M6IE1pc3NpbmdUcmFuc2xhdGlvbkN1c3RvbUhhbmRsZXIgfSxcbiAgICAgIFRyYW5zbGF0ZVN0b3JlLFxuICAgICAgTmd4VHJhbnNsYXRlU2VydmljZSxcbiAgICAgIHsgcHJvdmlkZTogVVNFX1NUT1JFLCB1c2VWYWx1ZTogdW5kZWZpbmVkIH0sXG4gICAgICB7IHByb3ZpZGU6IFVTRV9ERUZBVUxUX0xBTkcsIHVzZVZhbHVlOiB1bmRlZmluZWQgfSxcbiAgICAgIHsgcHJvdmlkZTogVVNFX0VYVEVORCwgdXNlVmFsdWU6IGZhbHNlIH0sXG4gICAgICB7IHByb3ZpZGU6IERFRkFVTFRfTEFOR1VBR0UsIHVzZVZhbHVlOiB1bmRlZmluZWQgfSxcbiAgICBdO1xuICB9XG4gIHN0YXRpYyBmb3JSb290KCkge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogSTE4bk1vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogSTE4bk1vZHVsZS5wcm92aWRlcnMoKVxuICAgIH07XG4gIH1cbn1cbiJdfQ==