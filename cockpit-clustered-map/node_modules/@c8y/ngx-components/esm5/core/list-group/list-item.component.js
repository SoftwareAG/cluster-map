import * as tslib_1 from "tslib";
import { Component, ContentChild, ElementRef, ContentChildren, HostBinding, Input, QueryList } from '@angular/core';
import { ListItemActionComponent } from './list-item-action.component';
import { ListItemCollapseComponent } from './list-item-collapse.component';
import { ListItemFooterComponent } from './list-item-footer.component';
var ListItemComponent = /** @class */ (function () {
    function ListItemComponent(element) {
        this.element = element;
        this.active = false;
        this.collapsed = true;
        this.showFooter = false;
        this.showActions = false;
        this.showCollapse = false;
        this.dropdownUp = false;
        this.ACTION_ITEM_HEIGHT = 40;
    }
    ListItemComponent.prototype.ngAfterContentChecked = function () {
        this.actions = this.itemActions.toArray();
        this.showFooter = this.itemFooter != null;
        this.showActions = this.itemActions.length > 0;
        this.showCollapse = this.itemCollapse != null;
    };
    /**
     * A helper function which helps to determine if the dropdown
     * should toggle up.
     * @param dropdown The dropdown instance.
     */
    ListItemComponent.prototype.showDropdownUp = function () {
        var rect = this.element.nativeElement.getBoundingClientRect();
        this.dropdownUp =
            rect.bottom + this.itemActions.length * this.ACTION_ITEM_HEIGHT > window.innerHeight;
    };
    ListItemComponent.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    tslib_1.__decorate([
        Input(),
        HostBinding('class.active')
    ], ListItemComponent.prototype, "active", void 0);
    tslib_1.__decorate([
        Input()
    ], ListItemComponent.prototype, "collapsed", void 0);
    tslib_1.__decorate([
        ContentChild(ListItemFooterComponent, { static: false })
    ], ListItemComponent.prototype, "itemFooter", void 0);
    tslib_1.__decorate([
        ContentChildren(ListItemActionComponent)
    ], ListItemComponent.prototype, "itemActions", void 0);
    tslib_1.__decorate([
        ContentChild(ListItemCollapseComponent, { static: false })
    ], ListItemComponent.prototype, "itemCollapse", void 0);
    ListItemComponent = tslib_1.__decorate([
        Component({
            selector: 'c8y-list-item, c8y-li',
            template: "<div [ngClass]=\"{ expanded: !collapsed }\">\n  <div class=\"c8y-list__item__block\">\n    <ng-content select=\"c8y-list-item-radio, c8y-li-radio\"></ng-content>\n    <ng-content select=\"c8y-list-item-checkbox, c8y-li-checkbox\"></ng-content>\n\n    <ng-content select=\"c8y-list-item-icon, c8y-li-icon\"></ng-content>\n\n    <div class=\"c8y-list__item__body text-truncate-wrap\">\n      <ng-content select=\"c8y-list-item-body, c8y-li-body\"></ng-content>\n      <ng-content></ng-content>\n      <div class=\"c8y-list__item__footer\" *ngIf=\"showFooter\">\n        <ng-content select=\"c8y-list-item-footer, c8y-li-footer\"></ng-content>\n      </div>\n    </div>\n\n    <div class=\"c8y-list__item__actions\" *ngIf=\"showCollapse || showActions\">\n      <button\n        class=\"collapse-btn\"\n        title=\"{{ 'Expand' | translate }}\"\n        type=\"button\"\n        (click)=\"collapsed = !collapsed\"\n        [attr.aria-expanded]=\"!collapsed\"\n        *ngIf=\"showCollapse\"\n      >\n        <i [c8yIcon]=\"'chevron-down'\"></i>\n      </button>\n      <div\n        class=\"dropdown\"\n        dropdown\n        [dropup]=\"dropdownUp\"\n        *ngIf=\"showActions\"\n        (onShown)=\"showDropdownUp()\"\n      >\n        <button\n          class=\"dropdown-toggle c8y-dropdown\"\n          dropdownToggle\n          title=\"{{ 'Options' | translate }}\"\n          type=\"button\"\n          aria-haspopup=\"true\"\n        >\n          <i [c8yIcon]=\"'ellipsis-v'\"></i>\n        </button>\n        <ul class=\"dropdown-menu dropdown-menu-right\" *dropdownMenu>\n          <ng-content select=\"c8y-list-item-action, c8y-li-action\"></ng-content>\n          <ng-container *ngFor=\"let action of actions\">\n            <ng-container *ngTemplateOutlet=\"action.template\"></ng-container>\n          </ng-container>\n        </ul>\n      </div>\n\n      <ng-content select=\"c8y-list-item-action, c8y-li-action\" *ngIf=\"showActions\"></ng-content>\n    </div>\n  </div>\n\n  <div *ngIf=\"showCollapse\" [collapse]=\"collapsed\" [isAnimated]=\"true\">\n    <div class=\"c8y-list__item__collapse--container\">\n      <ng-content select=\"c8y-list-item-collapse, c8y-li-collapse\"></ng-content>\n    </div>\n  </div>\n</div>\n",
            host: {
                class: 'c8y-list__item'
            }
        })
    ], ListItemComponent);
    return ListItemComponent;
}());
export { ListItemComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjOHkvbmd4LWNvbXBvbmVudHMvIiwic291cmNlcyI6WyJjb3JlL2xpc3QtZ3JvdXAvbGlzdC1pdGVtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxZQUFZLEVBQ1osVUFBVSxFQUNWLGVBQWUsRUFDZixXQUFXLEVBQ1gsS0FBSyxFQUNMLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN2RSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUMzRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQVN2RTtJQXFCRSwyQkFBbUIsT0FBbUI7UUFBbkIsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQWxCdEMsV0FBTSxHQUFZLEtBQUssQ0FBQztRQUV4QixjQUFTLEdBQVksSUFBSSxDQUFDO1FBUTFCLGVBQVUsR0FBWSxLQUFLLENBQUM7UUFDNUIsZ0JBQVcsR0FBWSxLQUFLLENBQUM7UUFDN0IsaUJBQVksR0FBWSxLQUFLLENBQUM7UUFFOUIsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUVYLHVCQUFrQixHQUFHLEVBQUUsQ0FBQztJQUVBLENBQUM7SUFFMUMsaURBQXFCLEdBQXJCO1FBQ0UsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzFDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUM7UUFDMUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQztJQUNoRCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILDBDQUFjLEdBQWQ7UUFDRSxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBQ2hFLElBQUksQ0FBQyxVQUFVO1lBQ2IsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztJQUN6RixDQUFDOztnQkFsQjJCLFVBQVU7O0lBbEJ0QztRQUZDLEtBQUssRUFBRTtRQUNQLFdBQVcsQ0FBQyxjQUFjLENBQUM7cURBQ0o7SUFFeEI7UUFEQyxLQUFLLEVBQUU7d0RBQ2tCO0lBRTFCO1FBREMsWUFBWSxDQUFDLHVCQUF1QixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDO3lEQUNyQjtJQUVwQztRQURDLGVBQWUsQ0FBQyx1QkFBdUIsQ0FBQzswREFDTztJQUVoRDtRQURDLFlBQVksQ0FBQyx5QkFBeUIsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQzsyREFDbkI7SUFYN0IsaUJBQWlCO1FBUDdCLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSx1QkFBdUI7WUFDakMsZ3RFQUF5QztZQUN6QyxJQUFJLEVBQUU7Z0JBQ0osS0FBSyxFQUFFLGdCQUFnQjthQUN4QjtTQUNGLENBQUM7T0FDVyxpQkFBaUIsQ0F3QzdCO0lBQUQsd0JBQUM7Q0FBQSxBQXhDRCxJQXdDQztTQXhDWSxpQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZCxcbiAgRWxlbWVudFJlZixcbiAgQ29udGVudENoaWxkcmVuLFxuICBIb3N0QmluZGluZyxcbiAgSW5wdXQsXG4gIFF1ZXJ5TGlzdFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IExpc3RJdGVtQWN0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi9saXN0LWl0ZW0tYWN0aW9uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBMaXN0SXRlbUNvbGxhcHNlQ29tcG9uZW50IH0gZnJvbSAnLi9saXN0LWl0ZW0tY29sbGFwc2UuY29tcG9uZW50JztcbmltcG9ydCB7IExpc3RJdGVtRm9vdGVyQ29tcG9uZW50IH0gZnJvbSAnLi9saXN0LWl0ZW0tZm9vdGVyLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2M4eS1saXN0LWl0ZW0sIGM4eS1saScsXG4gIHRlbXBsYXRlVXJsOiAnLi9saXN0LWl0ZW0uY29tcG9uZW50Lmh0bWwnLFxuICBob3N0OiB7XG4gICAgY2xhc3M6ICdjOHktbGlzdF9faXRlbSdcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBMaXN0SXRlbUNvbXBvbmVudCB7XG4gIEBJbnB1dCgpXG4gIEBIb3N0QmluZGluZygnY2xhc3MuYWN0aXZlJylcbiAgYWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpXG4gIGNvbGxhcHNlZDogYm9vbGVhbiA9IHRydWU7XG4gIEBDb250ZW50Q2hpbGQoTGlzdEl0ZW1Gb290ZXJDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpdGVtRm9vdGVyOiBMaXN0SXRlbUZvb3RlckNvbXBvbmVudDtcbiAgQENvbnRlbnRDaGlsZHJlbihMaXN0SXRlbUFjdGlvbkNvbXBvbmVudClcbiAgaXRlbUFjdGlvbnM6IFF1ZXJ5TGlzdDxMaXN0SXRlbUFjdGlvbkNvbXBvbmVudD47XG4gIEBDb250ZW50Q2hpbGQoTGlzdEl0ZW1Db2xsYXBzZUNvbXBvbmVudCwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGl0ZW1Db2xsYXBzZTogTGlzdEl0ZW1Db2xsYXBzZUNvbXBvbmVudDtcblxuICBzaG93Rm9vdGVyOiBib29sZWFuID0gZmFsc2U7XG4gIHNob3dBY3Rpb25zOiBib29sZWFuID0gZmFsc2U7XG4gIHNob3dDb2xsYXBzZTogYm9vbGVhbiA9IGZhbHNlO1xuICBhY3Rpb25zOiBMaXN0SXRlbUFjdGlvbkNvbXBvbmVudFtdO1xuICBkcm9wZG93blVwOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBBQ1RJT05fSVRFTV9IRUlHSFQgPSA0MDtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgZWxlbWVudDogRWxlbWVudFJlZikge31cblxuICBuZ0FmdGVyQ29udGVudENoZWNrZWQoKTogdm9pZCB7XG4gICAgdGhpcy5hY3Rpb25zID0gdGhpcy5pdGVtQWN0aW9ucy50b0FycmF5KCk7XG4gICAgdGhpcy5zaG93Rm9vdGVyID0gdGhpcy5pdGVtRm9vdGVyICE9IG51bGw7XG4gICAgdGhpcy5zaG93QWN0aW9ucyA9IHRoaXMuaXRlbUFjdGlvbnMubGVuZ3RoID4gMDtcbiAgICB0aGlzLnNob3dDb2xsYXBzZSA9IHRoaXMuaXRlbUNvbGxhcHNlICE9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQSBoZWxwZXIgZnVuY3Rpb24gd2hpY2ggaGVscHMgdG8gZGV0ZXJtaW5lIGlmIHRoZSBkcm9wZG93blxuICAgKiBzaG91bGQgdG9nZ2xlIHVwLlxuICAgKiBAcGFyYW0gZHJvcGRvd24gVGhlIGRyb3Bkb3duIGluc3RhbmNlLlxuICAgKi9cbiAgc2hvd0Ryb3Bkb3duVXAoKSB7XG4gICAgY29uc3QgcmVjdCA9IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHRoaXMuZHJvcGRvd25VcCA9XG4gICAgICByZWN0LmJvdHRvbSArIHRoaXMuaXRlbUFjdGlvbnMubGVuZ3RoICogdGhpcy5BQ1RJT05fSVRFTV9IRUlHSFQgPiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gIH1cbn1cbiJdfQ==