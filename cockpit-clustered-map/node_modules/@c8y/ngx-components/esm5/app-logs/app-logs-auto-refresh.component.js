import * as tslib_1 from "tslib";
import { Component, Input, Output, ViewChild, EventEmitter } from '@angular/core';
import { AppLogsService } from './app-logs.service';
import { fromEvent, Subject, of, interval, NEVER } from 'rxjs';
import { filter, catchError, tap, debounce, switchMap, takeUntil, finalize, delay, repeat, merge, scan } from 'rxjs/operators';
var AppLogsAutoRefreshComponent = /** @class */ (function () {
    function AppLogsAutoRefreshComponent(appLogsService) {
        this.appLogsService = appLogsService;
        this.cancel$ = new Subject();
        this.isAutoRefreshDisabled = false;
        this.logsToOutput = this.getEmptyLogsJson();
        this.isAutoRefreshOn = false;
        this.onNewLogs = new EventEmitter();
        this.toggleState = function (currentState) { return !currentState; };
    }
    Object.defineProperty(AppLogsAutoRefreshComponent.prototype, "buttonsDisabled", {
        set: function (areDisabled) {
            this.isAutoRefreshDisabled = areDisabled;
            if (areDisabled && this.isAutoRefreshOn) {
                this.cancel$.next(false);
            }
        },
        enumerable: true,
        configurable: true
    });
    AppLogsAutoRefreshComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        var clicks$ = fromEvent(this.button.nativeElement, 'click').pipe(merge(this.cancel$), debounce(function () { return interval(300); }), scan(this.toggleState, false), tap(function (isAutoRefreshOn) { return _this.setButtonState(isAutoRefreshOn); }), switchMap(function (isOn) { return (isOn ? _this.watchForNewLogs() : NEVER); }));
        this.subscription = clicks$.subscribe();
    };
    AppLogsAutoRefreshComponent.prototype.ngOnDestroy = function () {
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
    };
    AppLogsAutoRefreshComponent.prototype.setButtonState = function (isAutoRefreshOn) {
        this.isAutoRefreshOn = isAutoRefreshOn;
    };
    AppLogsAutoRefreshComponent.prototype.watchForNewLogs = function () {
        var _this = this;
        return this.startPolling().pipe(takeUntil(this.cancel$.pipe(filter(function (isAutoRefreshOn) { return isAutoRefreshOn === false; }))), finalize(function () {
            _this.isAutoRefreshOn = false;
        }));
    };
    AppLogsAutoRefreshComponent.prototype.startPolling = function () {
        var _this = this;
        return of(1).pipe(switchMap(function () { return _this.getNewLogs().pipe(catchError(function (er) { return of(_this.getEmptyLogsJson()); })); }), tap(function (logs) { return _this.updateLogsToOutput(logs); }), delay(10000), repeat());
    };
    AppLogsAutoRefreshComponent.prototype.getNewLogs = function () {
        return this.appLogsService.getLogs$(this.getAppId(), this.getInstanceName());
    };
    AppLogsAutoRefreshComponent.prototype.getAppId = function () {
        return this.mo.applicationId;
    };
    AppLogsAutoRefreshComponent.prototype.getInstanceName = function () {
        return this.selectedInstance.name;
    };
    AppLogsAutoRefreshComponent.prototype.updateLogsToOutput = function (newLogs) {
        var dateFrom = newLogs.dateFrom, dateTo = newLogs.dateTo;
        if (dateFrom && dateTo) {
            this.logsToOutput = tslib_1.__assign({}, newLogs);
            this.onNewLogs.emit(this.logsToOutput);
        }
    };
    AppLogsAutoRefreshComponent.prototype.getEmptyLogsJson = function () {
        return {
            dateFrom: null,
            dateTo: null,
            logs: '',
            truncated: false
        };
    };
    AppLogsAutoRefreshComponent.ctorParameters = function () { return [
        { type: AppLogsService }
    ]; };
    tslib_1.__decorate([
        Input()
    ], AppLogsAutoRefreshComponent.prototype, "selectedInstance", void 0);
    tslib_1.__decorate([
        Input()
    ], AppLogsAutoRefreshComponent.prototype, "mo", void 0);
    tslib_1.__decorate([
        Input()
    ], AppLogsAutoRefreshComponent.prototype, "buttonsDisabled", null);
    tslib_1.__decorate([
        Output()
    ], AppLogsAutoRefreshComponent.prototype, "onNewLogs", void 0);
    tslib_1.__decorate([
        ViewChild('autoRefresh', { static: true })
    ], AppLogsAutoRefreshComponent.prototype, "button", void 0);
    AppLogsAutoRefreshComponent = tslib_1.__decorate([
        Component({
            selector: 'c8y-app-logs-auto-refresh',
            template: "<button #autoRefresh\n  type=\"button\"\n  class=\"btn btn-link c8y-realtime\"\n  [ngStyle]=\"{'width': 'auto'}\"\n  title=\"{{'Toggle auto refresh' | translate}}\"\n  [disabled]=\"isAutoRefreshDisabled\"\n>\n  <span class=\"c8y-pulse\" [ngClass]=\"isAutoRefreshOn ? 'active' : 'inactive'\"></span>\n  {{'Auto refresh' | translate}}\n</button>"
        })
    ], AppLogsAutoRefreshComponent);
    return AppLogsAutoRefreshComponent;
}());
export { AppLogsAutoRefreshComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLWxvZ3MtYXV0by1yZWZyZXNoLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjOHkvbmd4LWNvbXBvbmVudHMvYXBwLWxvZ3MvIiwic291cmNlcyI6WyJhcHAtbG9ncy1hdXRvLXJlZnJlc2guY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBYyxNQUFNLGVBQWUsQ0FBQztBQUU5RixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEQsT0FBTyxFQUFjLFNBQVMsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBQ3pGLE9BQU8sRUFDTCxNQUFNLEVBQ04sVUFBVSxFQUNWLEdBQUcsRUFDSCxRQUFRLEVBQ1IsU0FBUyxFQUNULFNBQVMsRUFDVCxRQUFRLEVBQ1IsS0FBSyxFQUNMLE1BQU0sRUFDTixLQUFLLEVBQ0wsSUFBSSxFQUNMLE1BQU0sZ0JBQWdCLENBQUM7QUFNeEI7SUFtQkUscUNBQW9CLGNBQThCO1FBQTlCLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQWxCbEQsWUFBTyxHQUFxQixJQUFJLE9BQU8sRUFBVyxDQUFDO1FBQ25ELDBCQUFxQixHQUFZLEtBQUssQ0FBQztRQUN2QyxpQkFBWSxHQUFhLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQ2pELG9CQUFlLEdBQVksS0FBSyxDQUFDO1FBVXZCLGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBWSxDQUFDO1FBdUIzQyxnQkFBVyxHQUFHLFVBQUEsWUFBWSxJQUFJLE9BQUEsQ0FBQyxZQUFZLEVBQWIsQ0FBYSxDQUFDO0lBbEJDLENBQUM7SUFYN0Msc0JBQUksd0RBQWU7YUFBbkIsVUFBb0IsV0FBb0I7WUFDL0MsSUFBSSxDQUFDLHFCQUFxQixHQUFHLFdBQVcsQ0FB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O1FBQ3JDLElBQUksUUFBUSxJQUFJLE1BQU0sRUFBRTtZQUN0QixJQUFJLENBQUMsWUFBWSx3QkFBUSxPQUFPLENBQUUsQ0FBQztZQUNuQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDeEM7SUFDSCxDQUFDO0lBRU8sc0RBQWdCLEdBQXhCO1FBQ0UsT0FBTztZQUNMLFFBQVEsRUFBRSxJQUFJO1lBQ2QsTUFBTSxFQUFFLElBQUk7WUFDWixJQUFJLEVBQUUsRUFBRTtZQUNSLFNBQVMsRUFBRSxLQUFLO1NBQ2pCLENBQUM7SUFDSixDQUFDOztnQkFwRW1DLGNBQWM7O0lBYnpDO1FBQVIsS0FBSyxFQUFFO3lFQUF1QjtJQUN0QjtRQUFSLEtBQUssRUFBRTsyREFBUztJQUNSO1FBQVIsS0FBSyxFQUFFO3NFQUtQO0lBQ1M7UUFBVCxNQUFNLEVBQUU7a0VBQTBDO0lBQ1A7UUFBM0MsU0FBUyxDQUFDLGFBQWEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQzsrREFBb0I7SUFmcEQsMkJBQTJCO1FBSnZDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSwyQkFBMkI7WUFDckMsbVdBQXFEO1NBQ3RELENBQUM7T0FDVywyQkFBMkIsQ0F3RnZDO0lBQUQsa0NBQUM7Q0FBQSxBQXhGRCxJQXdGQztTQXhGWSwyQkFBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIFZpZXdDaGlsZCwgRXZlbnRFbWl0dGVyLCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBMb2dzSlNPTiB9IGZyb20gJy4vbG9ncy5tb2RlbCc7XG5pbXBvcnQgeyBBcHBMb2dzU2VydmljZSB9IGZyb20gJy4vYXBwLWxvZ3Muc2VydmljZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBmcm9tRXZlbnQsIFN1YmplY3QsIG9mLCBpbnRlcnZhbCwgTkVWRVIsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtcbiAgZmlsdGVyLFxuICBjYXRjaEVycm9yLFxuICB0YXAsXG4gIGRlYm91bmNlLFxuICBzd2l0Y2hNYXAsXG4gIHRha2VVbnRpbCxcbiAgZmluYWxpemUsXG4gIGRlbGF5LFxuICByZXBlYXQsXG4gIG1lcmdlLFxuICBzY2FuXG59IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWFwcC1sb2dzLWF1dG8tcmVmcmVzaCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9hcHAtbG9ncy1hdXRvLXJlZnJlc2guY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIEFwcExvZ3NBdXRvUmVmcmVzaENvbXBvbmVudCB7XG4gIGNhbmNlbCQ6IFN1YmplY3Q8Ym9vbGVhbj4gPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xuICBpc0F1dG9SZWZyZXNoRGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgbG9nc1RvT3V0cHV0OiBMb2dzSlNPTiA9IHRoaXMuZ2V0RW1wdHlMb2dzSnNvbigpO1xuICBpc0F1dG9SZWZyZXNoT246IGJvb2xlYW4gPSBmYWxzZTtcblxuICBASW5wdXQoKSBzZWxlY3RlZEluc3RhbmNlOiBhbnk7XG4gIEBJbnB1dCgpIG1vOiBhbnk7XG4gIEBJbnB1dCgpIHNldCBidXR0b25zRGlzYWJsZWQoYXJlRGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmlzQXV0b1JlZnJlc2hEaXNhYmxlZCA9IGFyZURpc2FibGVkO1xuICAgIGlmIChhcmVEaXNhYmxlZCAmJiB0aGlzLmlzQXV0b1JlZnJlc2hPbikge1xuICAgICAgdGhpcy5jYW5jZWwkLm5leHQoZmFsc2UpO1xuICAgIH1cbiAgfVxuICBAT3V0cHV0KCkgb25OZXdMb2dzID0gbmV3IEV2ZW50RW1pdHRlcjxMb2dzSlNPTj4oKTtcbiAgQFZpZXdDaGlsZCgnYXV0b1JlZnJlc2gnLCB7IHN0YXRpYzogdHJ1ZSB9KSBidXR0b246IEVsZW1lbnRSZWY7XG5cbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcExvZ3NTZXJ2aWNlOiBBcHBMb2dzU2VydmljZSkge31cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgY29uc3QgY2xpY2tzJCA9IGZyb21FdmVudCh0aGlzLmJ1dHRvbi5uYXRpdmVFbGVtZW50LCAnY2xpY2snKS5waXBlKFxuICAgICAgbWVyZ2UodGhpcy5jYW5jZWwkKSxcbiAgICAgIGRlYm91bmNlKCgpID0+IGludGVydmFsKDMwMCkpLFxuICAgICAgc2Nhbih0aGlzLnRvZ2dsZVN0YXRlLCBmYWxzZSksXG4gICAgICB0YXAoaXNBdXRvUmVmcmVzaE9uID0+IHRoaXMuc2V0QnV0dG9uU3RhdGUoaXNBdXRvUmVmcmVzaE9uKSksXG4gICAgICBzd2l0Y2hNYXAoaXNPbiA9PiAoaXNPbiA/IHRoaXMud2F0Y2hGb3JOZXdMb2dzKCkgOiBORVZFUikpXG4gICAgKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IGNsaWNrcyQuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG4gIHByaXZhdGUgdG9nZ2xlU3RhdGUgPSBjdXJyZW50U3RhdGUgPT4gIWN1cnJlbnRTdGF0ZTtcblxuICBwcml2YXRlIHNldEJ1dHRvblN0YXRlKGlzQXV0b1JlZnJlc2hPbjogYm9vbGVhbikge1xuICAgIHRoaXMuaXNBdXRvUmVmcmVzaE9uID0gaXNBdXRvUmVmcmVzaE9uO1xuICB9XG5cbiAgcHJpdmF0ZSB3YXRjaEZvck5ld0xvZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnRQb2xsaW5nKCkucGlwZShcbiAgICAgIHRha2VVbnRpbCh0aGlzLmNhbmNlbCQucGlwZShmaWx0ZXIoaXNBdXRvUmVmcmVzaE9uID0+IGlzQXV0b1JlZnJlc2hPbiA9PT0gZmFsc2UpKSksXG4gICAgICBmaW5hbGl6ZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuaXNBdXRvUmVmcmVzaE9uID0gZmFsc2U7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0UG9sbGluZygpIHtcbiAgICByZXR1cm4gb2YoMSkucGlwZShcbiAgICAgIHN3aXRjaE1hcCgoKSA9PiB0aGlzLmdldE5ld0xvZ3MoKS5waXBlKGNhdGNoRXJyb3IoZXIgPT4gb2YodGhpcy5nZXRFbXB0eUxvZ3NKc29uKCkpKSkpLFxuICAgICAgdGFwKGxvZ3MgPT4gdGhpcy51cGRhdGVMb2dzVG9PdXRwdXQobG9ncykpLFxuICAgICAgZGVsYXkoMTAwMDApLFxuICAgICAgcmVwZWF0KClcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXROZXdMb2dzKCk6IE9ic2VydmFibGU8TG9nc0pTT04+IHtcbiAgICByZXR1cm4gdGhpcy5hcHBMb2dzU2VydmljZS5nZXRMb2dzJCh0aGlzLmdldEFwcElkKCksIHRoaXMuZ2V0SW5zdGFuY2VOYW1lKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRBcHBJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm1vLmFwcGxpY2F0aW9uSWQ7XG4gIH1cbiAgcHJpdmF0ZSBnZXRJbnN0YW5jZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEluc3RhbmNlLm5hbWU7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUxvZ3NUb091dHB1dChuZXdMb2dzKSB7XG4gICAgY29uc3QgeyBkYXRlRnJvbSwgZGF0ZVRvIH0gPSBuZXdMb2dzO1xuICAgIGlmIChkYXRlRnJvbSAmJiBkYXRlVG8pIHtcbiAgICAgIHRoaXMubG9nc1RvT3V0cHV0ID0geyAuLi5uZXdMb2dzIH07XG4gICAgICB0aGlzLm9uTmV3TG9ncy5lbWl0KHRoaXMubG9nc1RvT3V0cHV0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEVtcHR5TG9nc0pzb24oKTogTG9nc0pTT04ge1xuICAgIHJldHVybiB7XG4gICAgICBkYXRlRnJvbTogbnVsbCxcbiAgICAgIGRhdGVUbzogbnVsbCxcbiAgICAgIGxvZ3M6ICcnLFxuICAgICAgdHJ1bmNhdGVkOiBmYWxzZVxuICAgIH07XG4gIH1cbn1cbiJdfQ==