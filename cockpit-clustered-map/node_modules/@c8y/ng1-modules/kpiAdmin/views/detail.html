<div ng-controller="KpiDetailCtrl">
  <div class="row">
    <div class="col-sm-8 col-md-6">
      <form name="editKpi" class="card" role="form" ng-submit="save()" novalidate>
        <div class="card-block">
          <div class="flex-row">
            <div class="form-group" ng-class="{'has-error': invalid('color')}">
              <label>{{ 'Color' | translate }}</label>
              <div class="data-point-color">
                <input
                  c8y-color-picker="{theme: 'hidden-input', position: 'bottom left'}"
                  type="hidden"
                  class="colorpicker"
                  name="color"
                  ng-model="kpiMO.c8y_Kpi.color"
                  required
                  uib-tooltip="{{ invalidTxt('color') | translate }}"
                />
              </div>
            </div>

            <div
              class="form-group"
              ng-class="{'has-error': invalid('label')}"
              style="flex: 1 1 auto; align-self: flex-start; padding-left:10px;"
            >
              <label>{{ 'Label' | translate }}</label>
              <input
                class="form-control"
                name="label"
                ng-model="kpiMO.c8y_Kpi.label"
                placeholder="{{ 'e.g. Temperature' | translate }}"
                required
                uib-tooltip="{{ invalidTxt('label') | translate }}"
              />
            </div>
          </div>

          <div class="form-group" ng-class="{'has-error': invalid('fragment')}">
            <label>{{ 'Fragment' | translate }}</label>
            <input
              class="form-control"
              name="fragment"
              ng-pattern="PATTERN_VALIDATE_FRAGMENT_SERIES"
              ng-model="kpiMO.c8y_Kpi.fragment"
              placeholder="{{ 'e.g.' | translate }} c8y_Temperature"
              required
              uib-tooltip="{{ invalidTxt('fragment') | translate }}"
            />
          </div>

          <div class="form-group" ng-class="{'has-error': invalid('series')}">
            <label>{{ 'Series' | translate }}</label>
            <input
              class="form-control"
              name="series"
              ng-pattern="PATTERN_VALIDATE_FRAGMENT_SERIES"
              ng-model="kpiMO.c8y_Kpi.series"
              placeholder="{{ 'e.g.' | translate }} T"
              required
              uib-tooltip="{{ invalidTxt('series') | translate }}"
            />
          </div>

          <div class="row">
            <div class="form-group col-md-3" ng-class="{'has-error': invalid('unit')}">
              <label translate>Unit</label>
              <input
                class="form-control"
                name="unit"
                ng-model="kpiMO.c8y_Kpi.unit"
                uib-tooltip="{{ invalidTxt('unit') | translate }}"
                placeholder="{{ 'e.g.' | translate }} ÂºC"
              />
            </div>

            <div class="form-group col-md-3" ng-class="{'has-error': invalid('target')}">
              <label translate>Target</label>
              <input
                type="number"
                step="any"
                class="form-control"
                name="target"
                ng-model="kpiMO.c8y_Kpi.target"
                uib-tooltip="{{ invalidTxt('target') | translate }}"
                placeholder="{{ 'e.g.' | translate }} 25"
              />
            </div>

            <div class="form-group col-md-3" ng-class="{'has-error': invalid('min')}">
              <label translate>Minimum</label>
              <input
                type="number"
                step="any"
                class="form-control"
                name="min"
                ng-model="kpiMO.c8y_Kpi.min"
                uib-tooltip="{{ invalidTxt('min') | translate }}"
                placeholder="{{ 'e.g.' | translate }} 0"
              />
            </div>

            <div class="form-group col-md-3" ng-class="{'has-error': invalid('max')}">
              <label translate>Maximum</label>
              <input
                type="number"
                step="any"
                class="form-control"
                name="max"
                ng-model="kpiMO.c8y_Kpi.max"
                uib-tooltip="{{ invalidTxt('max') | translate }}"
                placeholder="{{ 'e.g.' | translate }} 100"
              />
            </div>
          </div>

          <div class="row">
            <div class="form-group col-md-3" ng-class="{'has-error': invalid('yellowRangeMin')}">
              <label translate>Yellow range</label>
              <input
                type="number"
                step="any"
                class="form-control"
                name="yellowRangeMin"
                ng-model="kpiMO.c8y_Kpi.yellowRangeMin"
                placeholder="{{ 'e.g.' | translate }} 50"
                uib-tooltip="{{ invalidTxt('yellowRangeMin') | translate }}"
              />
            </div>

            <div class="form-group col-md-3" ng-class="{'has-error': invalid('yellowRangeMax')}">
              <label>&nbsp;</label>
              <input
                type="number"
                step="any"
                class="form-control"
                name="yellowRangeMax"
                ng-model="kpiMO.c8y_Kpi.yellowRangeMax"
                placeholder="{{ 'e.g.' | translate }} 75"
                uib-tooltip="{{ invalidTxt('yellowRangeMax') | translate }}"
              />
            </div>

            <div class="form-group col-md-3" ng-class="{'has-error': invalid('redRangeMin')}">
              <label translate>Red range</label>
              <input
                type="number"
                step="any"
                class="form-control"
                name="redRangeMin"
                ng-model="kpiMO.c8y_Kpi.redRangeMin"
                placeholder="{{ 'e.g.' | translate }} 75"
                uib-tooltip="{{ invalidTxt('redRangeMin') | translate }}"
              />
            </div>

            <div class="form-group col-md-3" ng-class="{'has-error': invalid('redRangeMax')}">
              <label>&nbsp;</label>
              <input
                type="number"
                step="any"
                class="form-control"
                name="redRangeMax"
                ng-model="kpiMO.c8y_Kpi.redRangeMax"
                placeholder="{{ 'e.g.' | translate }} 100"
                uib-tooltip="{{ invalidTxt('redRangeMax') | translate }}"
              />
            </div>
          </div>
        </div>

        <div class="card-footer text-center separator">
          <c8y-ui-button-footer changed="editKpi.$dirty">
            <button
              title="{{ 'Cancel' | translate }}"
              type="button"
              class="btn btn-default"
              ng-click="cancel()"
              translate
            >
              Cancel
            </button>
            <button
              title="{{ 'Save' | translate }}"
              type="submit"
              class="btn btn-primary"
              ng-disabled="!formValid() || !editKpi.$dirty"
              translate
            >
              Save
            </button>
          </c8y-ui-button-footer>
        </div>
      </form>
    </div>
  </div>
</div>
