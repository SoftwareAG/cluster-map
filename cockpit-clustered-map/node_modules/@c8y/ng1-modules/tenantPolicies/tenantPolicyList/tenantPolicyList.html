<c8y-ui-title-set title="vm.TITLE | translate"> </c8y-ui-title-set>

<c8y-ui-action-bar-set>
  <li class="navbar-form hidden-xs" action-bar-position="left">
    <c8y-list-display-control
      list-length="vm.policies.length"
      on-list-class-change="vm.listClass = listClass"
    >
    </c8y-list-display-control>
  </li>

  <a
    title="{{ 'Add tenant policy' | translate }}"
    href="#{{ vm.ROUTE_NEW_POLICY }}"
    class="btn btn-link"
  >
    <i c8y-icon="plus-circle"></i> {{ 'Add tenant policy' | translate }}
  </a>

  <button
    title="{{ 'Reload' | translate }}"
    type="button"
    class="btn btn-link"
    ng-click="vm.reload()"
  >
    <i c8y-icon="refresh"></i> {{ 'Reload' | translate }}
  </button>
</c8y-ui-action-bar-set>

<div class="c8y-empty-state text-center" ng-if="vm.policies.length === 0">
  <h1 class="c8y-icon c8y-icon-tenant-policies c8y-icon-duocolor"></h1>
  <h3 translate>No tenant policies to display</h3>
  <p translate>Click below to add your first tenant policy.</p>
  <a
    title="{{ 'Add tenant policy' | translate }}"
    href="#{{ vm.ROUTE_NEW_POLICY }}"
    class="btn btn-primary"
  >
    <i c8y-icon="plus-circle"></i> {{ 'Add tenant policy' | translate }}
  </a>
  <!-- <p><small><span translate>Find out more on</span> <a href="{{vm.documentationURL}}" target="_blank" translate>User guide</a>.</small></p> -->
</div>

<div class="card-group" ng-class="vm.listClass">
  <div ng-repeat="policy in vm.policies |orderBy:'name'" class="col-xs-12 col-sm-4 col-md-3">
    <div class="card" ng-click="vm.edit(policy.id)">
      <div class="card-actions" ng-click="$event.stopPropagation();">
        <div class="dropdown settings" uib-dropdown>
          <button
            title="{{ 'Actions' | translate }}"
            class="dropdown-toggle c8y-dropdown"
            uib-dropdown-toggle
            ng-click="::$event.stopPropagation()"
          >
            <i c8y-icon="ellipsis-v"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>
            <li>
              <a
                title="{{ 'Edit' | translate }}"
                href=""
                ng-click="::$event.stopPropagation();vm.edit(policy)"
              >
                <i c8y-icon="pencil"></i> <translate>Edit</translate>
              </a>
            </li>
            <li>
              <a
                title="{{ 'Duplicate' | translate }}"
                href=""
                ng-click="::$event.stopPropagation();vm.duplicate(policy)"
              >
                <i c8y-icon="copy"></i> <translate>Duplicate</translate>
              </a>
            </li>
            <li>
              <a
                title="{{ 'Delete' | translate }}"
                href=""
                ng-click="::$event.stopPropagation();vm.remove(policy)"
              >
                <i c8y-icon="trash"></i> <translate>Delete</translate>
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="card-header text-truncate">
        <div class="card-icon">
          <i c8y-icon="{{ vm.ICON }} c8y-icon-duocolor"></i>
        </div>
        <div class="card-title" title="{{ policy.name }}">
          {{ policy.name }}
        </div>
      </div>
      <!-- ./card-header -->
      <div class="card-block">
        <p>{{ policy.description }}</p>
        <br />
        <div class="clearfix card-item-last">
          <p class="pull-left">
            <span class="badge bg-primary" ng-bind="::(policy.retentions.length || 0)"></span>
            <small translate class="text-muted">Retention rules</small>
          </p>

          <p class="pull-right">
            <small translate class="text-muted">Tenant options</small>
            <span class="badge bg-complementary" ng-bind="::(policy.options.length || 0)"></span>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
