"use strict";!function(){function e(n,t,i,o,r,a,e,l,u){function s(){r.list({pageSize:1e3}).then(function(e){n.retentions=e,n.paging=e.paging},c)}function c(e){403===e.status?i.info(u("You need these roles to access retention rules: Retention rule Read/Admin")):i.danger(l.getString(e.data.message),e.data)}function d(e){var t=_.partial(i.success,u("Retention rule deleted."));return r.remove(e).then(_.partial(f,e)).then(t)}function f(e){_.remove(n.retentions,e)}function g(e){n.retentions.push(e)}function R(e){var t=_.find(n.retentions,{id:e.id});_.merge(t,e)}function h(e){return!1!==e.editable}e.changeTitle({title:u("Retention rules")}),s(),n.list=s,n.createModal=function(){return a.editRetentionRule().then(g)},n.updateModal=function(e){return h(e)?a.editRetentionRule(e).then(R):t.resolve()},n.removeWithConfirmation=function(e){return o({title:u("Delete retention rule"),body:u("You are about to delete this retention rule. Do you want to proceed?"),labels:{ok:u("Delete")},status:"danger",size:"sm"}).then(_.partial(d,e))},n.isEditable=h}e.$inject=["$scope","$q","c8yAlert","c8yModal","c8yRetentions","c8yUiUtil","c8yTitle","gettextCatalog","gettext"],angular.module("c8y.parts.retentionRules").controller("c8yRetentionRulesListCtrl",e)}();