<div class="card-group">
  <div class="col-md-10">
    <div class="card">
      <div class="card-block" ng-show="vm.customLoadBalancerOff">
        <div class="legend form-block">
          {{ 'SSL certificate' | translate }}
        </div>
        <div ng-show="!vm.certificate">
          <p style="margin-bottom: 5px;" translate>
            First you have to upload the appropriate certificate by clicking "Upload certificate".
            Make sure that:
          </p>
          <ul>
            <li translate>the certificate is in a valid PKCS#12 format</li>
            <li translate>the certificate is not password protected</li>
            <li translate>you are using a wildcard certificate to enable creation of subtenants</li>
          </ul>
        </div>
        <div ng-show="vm.certificate" class="list-group">
          <div class="list-group-item">
            <div class="list-item-body">
              <div class="row">
                <div class="col-sm-3">
                  <label class="small" translate>Valid from</label><br />
                  {{ vm.certificate.validFrom }}
                </div>
                <div class="col-sm-3">
                  <label class="small" translate>Valid to</label><br />
                  {{ vm.certificate.validTo }}
                </div>
                <div class="col-sm-2">
                  <label class="small" translate>Common name</label><br />
                  {{ vm.certificate.cn }}
                </div>
                <div class="col-sm-3">
                  <label class="small" translate>Serial number</label><br />
                  {{ vm.certificate.serialNumber }}
                </div>
                <div class="col-sm-1 text-right">
                  <button
                    class="btn btn-danger btn-xs"
                    title="{{ 'Delete' | translate }}"
                    ng-click="vm.deleteCertificate()"
                    ng-disabled="vm.certificate.activated"
                  >
                    <i c8y-icon="times"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <br />
        <button type="button" class="btn btn-primary" ng-click="vm.showUploadModal()">
          <span ng-show="!vm.certificate">{{ 'Upload certificate' | translate }}</span>
          <span ng-show="vm.certificate">{{ 'Replace certificate' | translate }}</span>
        </button>
      </div>
      <div class="card-block" ng-if="vm.certificate">
        <div class="legend form-block">
          {{ 'Custom domain name' | translate }}
        </div>
        <div ng-if="vm.certificate.licensePresent">
          <p translate>Before activating the custom domain name, make sure that:</p>
          <ul>
            <li translate>you uploaded a valid SSL certificate for your custom domain</li>
            <li translate>the common name (domain name) is not used by any other tenant</li>
            <li translate>
              the certificate is currently valid (validFrom in the past and validTo in the future)
            </li>
            <li translate>
              you added a CNAME entry to your DNS server. Make sure to remove all A entries for the
              wildcard domain. If your DNS service does not provide CNAME entries for wildcard
              certificates, please contact our support
            </li>
          </ul>
          <p style="margin-bottom: 10px;">
            <span c8y-guide-docs translate
              >For details refer to the
              <a c8y-guide-href="users-guide/administration/">User guide`KEEP_ORIGINAL`</a>.</span
            >
          </p>
          <p translate>
            Changes in the name server need time to propagate and take effect. Wait approximately
            one hour before activating your domain here.
          </p>
          <p translate>
            After the activation is completed you will no longer be able to access your tenant with
            {{ vm.domainName }}, instead use your new custom domain name {{ vm.newDomainName }}.
          </p>
        </div>
        <p ng-if="!vm.certificate.licensePresent" translate>
          To activate your domain, you need a valid license. Please contact our support to install a
          license for your domain.
        </p>
        <br />
        <button
          title="{{ 'Deactivate' | translate }}"
          type="button"
          class="btn btn-primary"
          ng-click="vm.deactivateCertificate()"
          ng-show="vm.certificate.activated"
          style="margin-left: 0"
          translate
        >
          Deactivate
        </button>
        <button
          title="{{ 'Activate' | translate }}"
          type="button"
          class="btn btn-primary"
          ng-click="vm.activateCertificate()"
          ng-show="!vm.certificate.activated"
          ng-disabled="!vm.certificate.licensePresent || !vm.validWildcard"
          translate
        >
          Activate
        </button>
      </div>
    </div>
  </div>
</div>
