<div class="card" ng-controller="deviceConfigurationWidgetCtrl">
  <div class="card-header">
    <h4 class="card-title">{{ 'Configuration' | translate }}</h4>
  </div>
  <div class="card-actions">
    <button
      title="{{ 'Reload' | translate }}"
      type="button"
      class="btn btn-link"
      ng-disabled="reloadingConfiguration || savingConfiguration"
      ng-click="reloadConfiguration()"
      ng-show="supportsOperation('c8y_SendConfiguration')"
    >
      <i c8y-icon="refresh" ng-class="{'fa-spin': reloadingConfiguration}"></i>
      {{ 'Reload' | translate }}
    </button>
  </div>
  <textarea
    c8y-code-editor
    ng-model="device.c8y_Configuration.config"
    class="form-control"
    style="height: 500px"
    ng-disabled="reloadingConfiguration || savingConfiguration"
    c8y-spellcheck="false"
  ></textarea>
  <div class="card-footer" ng-show="supportsOperation('c8y_Configuration')">
    <button
      type="button"
      ng-click="configuration(device.c8y_Configuration.config)"
      ng-disabled="reloadingConfiguration || savingConfiguration"
      class="btn btn-primary"
      ng-class="{'btn-pending': savingConfiguration}"
    >
      <span title="{{ 'Save' | translate }}" ng-hide="savingConfiguration">
        {{ 'Save' | translate }}
      </span>
      <span title="{{ 'Saving' | translate }}…" ng-show="savingConfiguration">
        {{ 'Saving' | translate }}…</span
      >
    </button>
  </div>
</div>
