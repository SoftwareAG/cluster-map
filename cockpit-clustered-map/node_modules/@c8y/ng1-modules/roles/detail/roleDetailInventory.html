<c8y-ui-title-set title="::vm.role.name"></c8y-ui-title-set>

<c8y-breadcrumbs-set>
  <c8y-breadcrumbs-item
    path="#roles"
    label="{{ 'Roles' | translate }}"
    icon="c8y-users"
  ></c8y-breadcrumbs-item>
  <c8y-breadcrumbs-item
    path="#roles/inventory_roles"
    label="{{ 'Inventory roles' | translate }}"
    icon="vcard"
  ></c8y-breadcrumbs-item>
</c8y-breadcrumbs-set>

<div class="row">
  <form name="vm.inventoryRoleDetailForm">
    <div class="col-md-6">
      <div class="card">
        <div class="card-block ">
          <div class="form-group">
            <label translate>Name</label>
            <input
              name="name"
              placeholder="{{ 'e.g. My inventory role' | translate }}"
              required
              class="form-control"
              ng-maxlength="50"
              ng-model="vm.role.name"
            />
            <c8y-error-feedback field="vm.inventoryRoleDetailForm.name"> </c8y-error-feedback>
          </div>
          <div class="form-group">
            <label translate>Description</label>
            <textarea
              name="description"
              class="form-control"
              style="height: 200px;"
              ng-maxlength="1000"
              ng-model="vm.role.description"
            ></textarea>
            <c8y-error-feedback field="vm.inventoryRoleDetailForm.description">
            </c8y-error-feedback>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 pull-right">
      <p class="bottom-m">
        <span translate>
          An <strong>inventory role</strong> contains permissions that can be attached to groups of
          devices.<br />
          Click <i c8y-icon="plus-circle" class="text-primary"></i> to add a new permission. In the
          permission drop-down, you can further restrict the access to objects containing the
          defined type. </span
        ><br />
        <small title="{{ 'Help &amp; documentation' | translate }}" ng-show="::vm.helpLink">
          <a ng-href="{{::vm.helpLink}}" target="_blank" rel="noopener noreferrer">
            <i c8y-icon="question-circle-o"></i>
            <span translate>Help &amp; documentation</span>
          </a>
        </small>
      </p>
      <div ng-repeat="scope in vm.permissionScopes" style="margin-bottom:20px;">
        <h4 style="display:inline-block">
          {{ scope.label | translate }}
        </h4>
        <a
          href=""
          ng-show="::vm.STRINGS.PERMISSIONS_SCOPES[scope.value]"
          popover-placement="right auto"
          popover-trigger="'focus'"
          uib-popover="{{::vm.STRINGS.PERMISSIONS_SCOPES[scope.value] | translate}}"
        >
          <i c8y-icon="question-circle-o"></i>
        </a>
        <c8y-role-inventory-permission-list scope="::scope.value" permissions="vm.role.permissions">
        </c8y-role-inventory-permission-list>
      </div>
    </div>
  </form>
</div>

<div class="page-footer text-center">
  <c8y-ui-button-footer>
    <button
      title="{{ 'Cancel' | translate }}" 
      type="button"
      class="btn btn-default"
      ng-click="vm.cancel()"
      ng-disabled="vm.saving"
      translate
    >
      Cancel
    </button>
    <button
      title="{{ 'Save' | translate }}"
      type="button"
      class="btn btn-primary"
      ng-click="vm.save()"
      ng-disabled="vm.saving || vm.inventoryRoleDetailForm.$invalid || (vm.role.id && vm.inventoryRoleDetailForm.$pristine)"
      translate
    >
      Save
    </button>
  </c8y-ui-button-footer>
</div>
