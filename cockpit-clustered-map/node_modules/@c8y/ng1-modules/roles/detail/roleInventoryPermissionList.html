<ng-form name="vm.permissionsListForm">
  <ul class="list-unstyled">
    <li class="card-row-add-remove form-inline" ng-repeat="permission in vm.scopedPermissions">
      <div style="float:right; margin-top:6px" ng-show="vm.isOverridden(permission)">
        <a
          href=""
          class="text-warning"
          uib-popover="{{
            'This permission is overridden by a more generic one in this role.' | translate
          }}"
          popover-append-to-body="true"
          popover-trigger="'focus'"
          popover-placement="auto left"
        >
          <i c8y-icon="exclamation-circle"></i>
        </a>
      </div>
      <div class="form-group">
        <label>{{ 'Type' | translate }} </label>
        <input
          type="text"
          class="form-control"
          style="font-weight:normal"
          ng-model="permission.type"
          ng-change="vm.removeId(permission)"
          placeholder="{{ 'e.g. * or specific fragment type' | translate }}"
          required
        />
      </div>
      <div class="form-group">
        <label>{{ 'Permission' | translate }} </label>
        <div class="c8y-select-wrapper">
          <select
            class="form-control"
            name="permission"
            style="font-weight:normal"
            ng-options="access.value as (access.label | translate) for access in vm.accessTypes.values()"
            ng-model="permission.permission"
            ng-change="vm.removeId(permission)"
          >
          </select>
          <span></span>
        </div>
      </div>
      <div class="add-remove-btns">
        <button
          title="{{ 'Remove' | translate }}"
          type="button"
          class="btn btn-link btn-remove"
          ng-click="vm.remove(permission)"
        >
          <i class="text-muted" c8y-icon="minus-circle"></i>
        </button>
        <button
          title="{{ 'Add' | translate }}"
          type="button"
          ng-click="vm.add()"
          class="btn btn-link btn-add"
        >
          <i c8y-icon="plus-circle"></i>
        </button>
      </div>
    </li>

    <li ng-if="vm.scopedPermissions.length === 0" class="card-row-add-remove ">
      <span style="display:block; padding-top: 7px;" translate>No permissions for this scope.</span>
      <div class="add-remove-btns">
        <button
          title="{{ 'Add' | translate }}"
          type="button"
          ng-click="vm.add()"
          class="btn btn-link btn-add"
        >
          <i c8y-icon="plus-circle"></i>
        </button>
      </div>
    </li>
  </ul>
</ng-form>
