"use strict";!function(){function n(t,e,a,i,o,s,u,n,l,r){var c=this,d=i.createEnum([{name:"ACTIVE",label:l("ACTIVE`tenant`")},{name:"SUSPENDED",label:l("SUSPENDED`tenant`")}]);function g(){delete t.tenants,u.list({withApps:!1}).then(f)}function f(n){t.tenants||(t.tenants=[],c.tenants=t.tenants),n.forEach(function(n){t.tenants.push(n)}),t.paging=n.paging,function(n){var t=r.getPlural(n,"1 tenant","{{$count}} tenants",{});o.changeTitle({title:l("Tenants"),subtitle:_.isUndefined(n)?"":t})}(t.tenants.length),t.listClass=9<n.length?"interact-list":"interact-grid"}function p(n,t){n.status=t.value,u.save(n).then(function(){return s.success(l("Tenant updated."))}).then(g)}t.TENANT_STATUS=d,t.detail=function(n){e.path("/tenants/".concat(n.id))},t.add=function(){e.path("/tenants/new")},t.onClickDelete=function(n){a({title:l("Delete tenant"),body:r.getString('You are about to delete tenant "{{company}}" (ID "{{id}}"). Do you want to proceed?',n),status:"danger",labels:{ok:l("Delete")}}).then(angular.bind(u,u.remove,n)).then(angular.bind(i,i.removeFromList,t.tenants,n)).then(function(){return s.success(l("Tenant deleted."))})},t.loadNext=function(){t.paging.loading=!0,t.paging.next().then(f).finally(function(){t.paging.loading=!1})},t.refresh=function(){t.tenants=null,t.refreshLoading=!0,t.paging.refresh().then(f).finally(function(){t.refreshLoading=!1}),t.paging=null},t.suspendTenant=_.wrap(function(n){return p(n,d.SUSPENDED)},function(t,e){return a({title:l("Suspend tenant"),body:r.getString('You are about to suspend tenant "{{company}}" (ID "{{id}}"). Do you want to proceed?',e),status:"danger",labels:{ok:l("Suspend`tenant`")}}).then(n.askForPassword).then(function(n){n&&t(e)})}),t.activateTenant=function(n){return p(n,d.ACTIVE)},u.isCurrentUserTopTenant().then(function(n){t.isTopTenant=n}),g()}n.$inject=["$scope","$location","c8yModal","c8yBase","c8yTitle","c8yAlert","c8yTenant","c8yUserUtil","gettext","gettextCatalog"],angular.module("c8y.tenants").controller("tenantListCtrl",n)}();