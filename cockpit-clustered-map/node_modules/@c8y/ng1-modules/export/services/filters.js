"use strict";angular.module("c8y.cockpit.export").factory("c8yExportFilters",["$q","c8yBase","c8yInventory","c8yGroups",function(e,o,a,r){function n(e,t){this.name=e,this.onLoad(t)}function t(e,t){n.call(this,e,t)}function i(e,t,o){n.call(this,e,t,o)}return n.prototype.onLoad=function(e){this.value=e.queryParameters[this.name],this.enabled=Boolean(e.queryParameters[this.name])},n.prototype.onSave=function(e){this.enabled&&(e.queryParameters[this.name]=this.value)},(t.prototype=Object.create(n.prototype)).onLoad=function(e){var t=e.queryParameters;this.value=t.source||t.groupId,this.enabled=Boolean(this.value),this.loadSource()},t.prototype.loadSource=function(){var t=this;return this.value?a.detail(this.value).then(o.getResData).then(function(e){t.value=e}):e.when()},t.prototype.onSave=function(e){var t=e.queryParameters;delete t.source,delete t.groupId,this.enabled&&this.value&&(r.isGroup(this.value)?t.groupId=this.value.id:t.source=this.value.id)},(i.prototype=Object.create(n.prototype)).onLoad=function(e){var t=e.queryParameters;this.value={dateType:t.dateType||"LAST_WEEK",from:t.from,to:t.to},this.enabled=!0},i.prototype.onSave=function(e){var t=e.queryParameters;delete t.dateType,delete t.from,delete t.to,this.enabled&&_.merge(t,this.value)},{Filter:n,SourceFilter:t,DateRangeFilter:i}}]);