<c8y-ui-action-bar-set>
  <a
    title="{{ 'Add module' | translate }}"
    href=""
    class="btn btn-link"
    ng-click="add()"
    ng-disabled="!vm.permissions.canAdmin"
  >
    <i c8y-icon="plus-square"></i> <translate>Add module</translate>
  </a>

  <c8y-refresh-btn></c8y-refresh-btn>
</c8y-ui-action-bar-set>

<div class="c8y-empty-state text-center" ng-show="modules.length === 0">
  <h1 class="c8y-icon c8y-icon-event-processing c8y-icon-duocolor"></h1>
  <h3 translate>No event processing modules found</h3>
  <p translate>Add your first module by clicking below.</p>
  <button class="btn btn-primary" ng-click="add()" translate>Add module</button>
  <p class="top-m-xs" c8y-guide-docs>
    <small translate
      >Find out more in the
      <a c8y-guide-href="users-guide/administration/#event-processing">User guide`KEEP_ORIGINAL`</a
      >.</small
    >
  </p>
</div>

<div class="list-group">
  <div class="list-group-item" ng-repeat="module in modules | orderBy:'name'">
    <div class="flex-row">
      <div class="list-item-actions">
        <div class="dropdown settings" is-open uib-dropdown dropdown-append-to-body>
          <button
            title="{{ 'Actions' | translate }}"
            class="dropdown-toggle c8y-dropdown btn-link"
            uib-dropdown-toggle
            aria-haspopup="true"
            aria-expanded="false"
          >
            <i c8y-icon="ellipsis-v"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>
            <li>
              <a href="" class="" title="{{ 'Edit' | translate }}" ng-click="detail(module)">
                <i c8y-icon="pencil"></i> <translate>Edit</translate>
              </a>
            </li>
            <li ng-if="vm.permissions.canAdmin">
              <a
                href=""
                class=""
                title="{{ 'Remove' | translate }}"
                ng-show="!isSmartRuleModule(module)"
                ng-click="onClickDelete(module)"
              >
                <i c8y-icon="times"></i> <translate>Remove</translate>
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="list-item-icon">
        <i
          c8y-icon="{{ statusIcon(module) }}"
          uib-tooltip="{{ status(module) }}"
          ng-class="statusClass(module)"
        ></i>
      </div>
      <div
        class="list-item-body"
        title="{{ 'Click to edit' | translate }}"
        ng-click="detail(module)"
      >
        <div class="row">
          <div class="col-sm-6">
            <span>{{ module.name }}</span>
          </div>
          <div class="col-sm-6 text-muted">
            <i c8y-icon="calendar" uib-tooltip="{{ 'Last edited' | translate }}"></i>
            <small>
              {{ module.lastModified | absoluteDate }}
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<c8y-load-more></c8y-load-more>
