<div ng-controller="connectivitySettingsCtrl" class="row">
  <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6">
    <form class="card" name="connectivitySettingsForm" novalidate>
      <div class="card-block">
        <p class="bottom-m">{{ tooltipText | translate }}</p>

        <p ng-if="credentialsSaved && !replacingCredentials" translate>
          Credentials already provided.<br />
          Click "Replace credentials" below to overwrite them.
        </p>
        <p ng-if="!credentialsSaved" translate>
          There are no credentials provided yet. Please provide some.
        </p>

        <div ng-if="!credentialsSaved || replacingCredentials">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="provider" translate>Provider</label>
                <div class="c8y-select-wrapper">
                  <select
                    id="provider"
                    name="provider"
                    class="form-control"
                    ng-model="connectivitySettings.providerName"
                    ng-change="onProviderChange()"
                    ng-options="provider.name as (provider.label | translate) for provider in supportedProviders | orderBy:'label'"
                    required
                  >
                  </select>
                  <span></span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group" ng-if="formSettings.url">
            <label for="url" class="control-label" translate>
              URL
            </label>
            <input
              type="text"
              class="form-control"
              placeholder="{{ 'e.g.' | translate }} http://www.example.com/"
              required
              name="url"
              id="url"
              ng-model="connectivitySettings.url"
              c8y-autocomplete="off"
            />
            <c8y-error-feedback field="connectivitySettingsForm.url"></c8y-error-feedback>
          </div>

          <div class="form-group" ng-if="formSettings['credentials.licenseKey']">
            <label for="licenseKey" class="control-label" translate>
              License key
            </label>
            <input
              type="text"
              class="form-control"
              placeholder="{{ 'e.g.' | translate }} 12345678-9abc-def1-2345-6789abcdef01"
              required
              name="licenseKey"
              id="licenseKey"
              ng-model="connectivitySettings['credentials.licenseKey']"
              c8y-autocomplete="off"
            />
            <c8y-error-feedback field="connectivitySettingsForm.licenseKey"></c8y-error-feedback>
          </div>

          <div class="row">
            <div class="col-md-6" ng-if="formSettings['credentials.username']">
              <div class="form-group">
                <label for="username" class="control-label" translate>
                  Username
                </label>

                <input
                  type="text"
                  class="form-control"
                  placeholder="{{ 'e.g. joe`LOCALIZE`' | translate }}"
                  required
                  name="username"
                  id="username"
                  ng-model="connectivitySettings['credentials.username']"
                  c8y-autocomplete="off"
                />
                <c8y-error-feedback field="connectivitySettingsForm.username"></c8y-error-feedback>
              </div>
            </div>
            <div class="col-md-6" ng-if="formSettings['credentials.password']">
              <div class="form-group">
                <label for="password" class="control-label" translate>
                  Password
                </label>
                <input
                  type="password"
                  class="form-control"
                  name="password"
                  id="password"
                  ng-model="connectivitySettings['credentials.password']"
                  value="********"
                  required
                  c8y-autocomplete="off"
                />
                <c8y-error-feedback field="connectivitySettingsForm.password"></c8y-error-feedback>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6" ng-if="formSettings['Client_ID']">
              <div class="form-group">
                <label for="clientID" class="control-label" translate>
                  Client ID
                </label>

                <input
                  type="text"
                  class="form-control"
                  required
                  name="clientID"
                  id="clientID"
                  ng-model="connectivitySettings['Client_ID']"
                />
                <c8y-error-feedback field="connectivitySettingsForm.clientID"></c8y-error-feedback>
              </div>
            </div>
            <div class="col-md-6" ng-if="formSettings['credentials.Client_Secret']">
              <div class="form-group">
                <label for="clientSecret" class="control-label" translate>
                  Client secret
                </label>
                <input
                  class="form-control"
                  name="clientSecret"
                  id="clientSecret"
                  ng-model="connectivitySettings['credentials.Client_Secret']"
                  required
                />
                <c8y-error-feedback
                  field="connectivitySettingsForm.clientSecret"
                ></c8y-error-feedback>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card-footer">
        <button
          title="{{ 'Replace credentials' | translate }}"
          class="btn btn-primary"
          ng-if="credentialsSaved && !replacingCredentials"
          ng-click="startReplacingCredentials()"
          translate
        >
          Replace credentials
        </button>
        <button
          title="{{ 'Save credentials' | translate }}"
          ng-if="!credentialsSaved || replacingCredentials"
          class="btn btn-primary"
          ng-click="updateCredentials(connectivitySettings, connectivitySettingsForm)"
          ng-disabled="connectivitySettingsForm.$invalid || connectivitySettingsForm.$pristine"
          translate
        >
          Save credentials
        </button>
      </div>
    </form>
  </div>
</div>
