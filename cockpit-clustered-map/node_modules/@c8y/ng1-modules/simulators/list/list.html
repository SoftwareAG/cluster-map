<c8y-ui-action-bar-set>
  <c8y-simulator-add on-added="vm.onSimulatorAdded(simulator)"> </c8y-simulator-add>

  <button
    title="{{ 'Reload' | translate }}"
    type="button"
    class="btn btn-link"
    ng-click="vm.load()"
    ng-disabled="vm.loading"
  >
    <i c8y-icon="refresh" ng-class="{'fa-spin': vm.loading}"></i> <span translate>Reload</span>
  </button>
</c8y-ui-action-bar-set>

<div class="c8y-empty-state text-center" ng-show="vm.simulators.length === 0">
  <h1 class="c8y-icon c8y-icon-simulator c8y-icon-duocolor"></h1>
  <h3 translate>No simulators created yet</h3>
  <p translate>Create your first Simulator.</p>
  <p><c8y-simulator-add on-added="vm.onSimulatorAdded(simulator)"></c8y-simulator-add></p>
  <p c8y-guide-docs>
    <small translate
      >Find out more in the
      <a c8y-guide-href="users-guide/device-management/#simulator">User guide`KEEP_ORIGINAL`</a
      >.</small
    >
  </p>
</div>

<div class="card-group interact-grid">
  <div ng-repeat="simulator in vm.simulators | orderBy:'name'" class="col-xs-12 col-sm-4 col-md-3">
    <div class="card" ng-click="vm.edit(simulator)">
      <div class="card-actions">
        <div class="dropdown  settings" uib-dropdown>
          <a
            class="dropdown-toggle c8y-dropdown"
            title="{{ 'Actions' | translate }}"
            uib-dropdown-toggle
            ng-click="$event.stopPropagation()"
          >
            <span><i c8y-icon="ellipsis-v"></i></span>
          </a>
          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>
            <li>
              <a
                title="{{ 'Edit' | translate }}"
                href=""
                ng-click="$event.stopPropagation();vm.edit(simulator)"
              >
                <i c8y-icon="edit"></i> <translate>Edit</translate>
              </a>
            </li>
            <li>
              <a
                title="{{ 'Duplicate' | translate }}"
                href=""
                ng-click="$event.stopPropagation();vm.clone(simulator)"
              >
                <i c8y-icon="clone"></i> <translate>Duplicate</translate>
              </a>
            </li>
            <li>
              <a
                title="{{ 'Remove' | translate }}"
                href=""
                ng-click="$event.stopPropagation();vm.remove(simulator)"
              >
                <i c8y-icon="times"></i> <translate>Remove</translate>
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="card-header separator">
        <div class="card-icon">
          <i c8y-icon="c8y-simulator c8y-icon-duocolor"></i>
        </div>
        <div class="text-truncate card-title" title="{{ simulator.name }}">
          {{ simulator.name }}
        </div>
      </div>

      <div class="card-block">
        <div class="row">
          <div class="col-xs-6" ng-switch="simulator.state">
            <label
              title="{{ 'Toggle simulator state' | translate }}"
              class="c8y-switch"
              ng-click="$event.stopPropagation()"
            >
              <input
                type="checkbox"
                ng-checked="simulator.state === 'RUNNING'"
                ng-click="$event.stopPropagation(); simulator.state === 'RUNNING' ? vm.pause(simulator) : vm.run(simulator);"
              />
              <span></span>
              <em title="{{ simulator.state | translate | lowercase }}" ng-switch-default>
                {{ simulator.state | translate | lowercase }}
              </em>
            </label>
          </div>
          <div class="col-xs-6 text-muted" style="line-height:32px">
            <div class="pull-right">
              <span title="{{ 'Instances' | translate }}">
                <i c8y-icon="{{ vm.icons.simulator }}"></i>
                {{ simulator.instances }}
              </span>

              <span title="{{ 'Instructions' | translate }}">
                <i c8y-icon="{{ vm.icons.instruction }}"></i>
                {{ simulator.commandQueue.length }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
