"use strict";!function(){function n(n){var t=window.c8y.coreFilePath("locales/angular");n.localeLocationPattern("".concat(t,"/angular-locale_{{locale}}.js"))}function t(n,t){n.$watch(function(){return t.getCurrentLanguage()},function(n){angular.element("html").attr("lang",n)})}t.$inject=["$rootScope","gettextCatalog"],n.$inject=["tmhDynamicLocaleProvider"],angular.module("c8y.ui").config(n).run(t).provider("c8yLocales",function(){function n(e,o,u,n,t,c,a,i){var r="_",l={en:"en-gb","en-EN":"en-gb"},g={en:"en-GB","en-EN":"en-GB"},s="en-gb",f="en-GB",p="en",h=null,d="c8y_language";function m(){return h||(h={},function(n){_.forEach(n,v)}(c.getRuntimeOption("languages")),_.forEach(y(),S)),h}function T(){var n=m();return _.keys(n)}function v(n){h[n]=h[n]||[]}function S(t){_.forEach(t.languages,function(n){v(n),function(n,t){h[n].push(t)}(n,t)})}function M(n){var t=T();return _.includes(t,j(n))}function E(){return function(){var t=[];R()&&t.push(R());D()&&t.push(D());(t=t.concat(A())).length&&O(_.find(t,M));return a.get("language").then(function(n){return n&&(t.unshift(n),R()&&t.unshift(R())),(t=(t=t.concat(A())).concat(function(n){var e=[];return _.forEach(n,function(n){if(n.indexOf("-")){var t=n.split("-");e.push(t[0])}}),e}(t))).push($(p)),_.find(t,M)})}().then(O)}function R(){return c.getRuntimeOption("queryStringLang")}function y(){return c.getRuntimeOption("importedPlugins")}function A(){for(var n=u.navigator,t=["languages","language","browserLanguage","systemLanguage","userLanguage"],e=[],a=0;a<t.length;a++){var r=n[t[a]];_.isArray(r)?e=e.concat(r):r&&e.push(r)}return e}function O(t){if(!t)return o.when();e.$emit("language:change");var n=_.map([F,P,w,L],function(n){return n(t)});return o.all(n)}function L(n){u.localStorage.setItem(d,n)}function D(){return u.localStorage.getItem(d)}function w(n){return t.set(C(n)).catch(angular.bind(t,t.set,function(n){return C(n.split("-")[0])}(n))).catch(angular.bind(t,t.set,s))}function C(n){return l[n]||angular.lowercase($(n))}function P(n){moment.locale(function(n){return g[n]||n||f}(n))}function F(n){var t=j(n),e=o.defer(),a=2,r=function(){--a||e.resolve()};return b(c.getFlag("langDebug")),i.setCurrentLanguage(t),window.C8Y_APP?i.loadRemote(function(n){return _.get(c.appOption("languages"),"".concat(n,".url"))||"".concat(n,".json")}(t)):(function(e){var n=_([{rootContextPath:"c8ydata/"}].concat(y())).map("rootContextPath").map(function(n){return n.split("/")[0]}).uniq().value();return o.all(_.map(n,function(n){var t=c.dataFilePath("locales/".concat(n,"/json/").concat(e,".json"));return i.loadRemote(t)}))}(t).finally(r),function(t){var n=function(n){return m()[n]}(t);return o.all(_.map(n,function(n){return i.loadRemote("/apps/".concat(n.rootContextPath,"/locales/").concat(t,".json"))}))}(t).finally(r),e.promise)}function b(n){i.debug=n}function $(n){var t=j(n).split(r);return t[0].toLowerCase()+(t[1]?"-".concat(t[1].toUpperCase()):"")}function j(n){var t=-1<n.indexOf("-")?"-":r,e=n.split(t);return e[0].toLowerCase()+(e[1]?r+e[1].toUpperCase():"")}function x(n,t){var e=function(n){var t=n;_.isString(n)?t=i.getString(n):_.isObject(n)&&(t=function(n){return _.mapValues(n,function(n){return _.isString(n)?i.getString(n):n})}(n));return t}(n);return _.assign(e,{__idx:t})}var I=o.defer(),N={initDone:I.promise,getSupportedLanguages:T,switchToDefaultLanguage:E,switchToLanguage:O,setDebugMode:b,getTranslatedArray:function(n){return _.map(n,x)},getD3Locales:function(){return d3.locale({decimal:n.NUMBER_FORMATS.DECIMAL_SEP,thousands:n.NUMBER_FORMATS.GROUP_SEP,days:n.DATETIME_FORMATS.DAY,shortDays:n.DATETIME_FORMATS.SHORTDAY,months:n.DATETIME_FORMATS.MONTH,shortMonths:n.DATETIME_FORMATS.SHORTMONTH,periods:n.DATETIME_FORMATS.AMPMS,grouping:[3],currency:[n.NUMBER_FORMATS.CURRENCY_SYM,""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S"})}};return c.getFlag("skipSwitchingToDefaultLanguage")?I.resolve():E().finally(function(){I.resolve()}),N}return n.$inject=["$rootScope","$q","$window","$locale","tmhDynamicLocale","c8yBase","c8yUserPreferences","gettextCatalog"],{$get:n}})}();