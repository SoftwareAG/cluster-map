<div class="c8y-empty-state text-center" ng-if="data.length === 0">
  <h1 class="c8y-icon c8y-icon-archive c8y-icon-duocolor"></h1>
  <h3 translate>No entries to display.</h3>
</div>

<label ng-show="data.length > 0 && columnsConfig.when">
  {{ 'Server time' | translate }}
  <a
    href=""
    uib-popover-html="'Server time can be different from device times in other fields.' | translate"
    popover-append-to-body="true"
    popover-placement="right"
    popover-trigger="'focus'"
  >
    <i c8y-icon="question-circle-o"></i>
  </a>
</label>

<div class="timeline-list list-condensed" ng-show="data.length > 0">
  <div
    ng-repeat="audit in data"
    ng-if="audit.type !== 'SYSTEM'"
    class="timeline-list-item flex-row"
  >
    <small class="timeline-item-date text-right">
      {{ audit.creationTime | absoluteDate }}
    </small>

    <div class="timeline-item-content flex-row wrap" ng-class="{'bg-warning': audit._isSupport}">
      <div class="list-item-icon" ng-if="columnsConfig.type">
        <a
          ng-if="convertTypeIcon(audit.type)"
          href=""
          uib-tooltip="{{ convertType(audit.type) | translate }}"
          class="text-gray-medium-dark"
        >
          <i c8y-icon="{{ convertTypeIcon(audit.type) }}"></i>
        </a>
        <i
          ng-if="!convertTypeIcon(audit.type)"
          c8y-icon="c8y-event"
          class="text-gray-medium-dark"
        ></i>
      </div>

      <div class="list-item-body">
        <div class="row text-break-word">
          <div ng-if="columnsConfig.text || columnsConfig.what" class="col-sm-7 col-md-6">
            <span>
              {{ audit.activity | translate }}
              <a
                ng-if="audit.sourceLink"
                class="text-muted"
                ng-href="{{ audit.sourceLink }}"
                title="{{ 'Go to source' | translate }}"
              >
                <i c8y-icon="cog"></i>
              </a>
              <a
                href=""
                ng-if="audit.sourceInfo && audit.showCogWheel"
                class="text-muted"
                ng-click="goToAuditDetail(audit.sourceInfo)"
                title="{{ 'Go to source' | translate }}"
              >
                <i c8y-icon="cog"></i>
              </a>
            </span>
            <!-- <span ng-if="!audit.sourceLink && !audit.sourceInfo"> -->
            <!-- </span> -->
            <small class="text-muted" style="display: block;">{{ audit.user }}</small>
          </div>

          <div class="col-sm-3 col-md-4" ng-if="columnsConfig.text || columnsConfig.what">
            <div class="text-truncate-wrap">
              <p ng-if="columnsConfig.text" title="{{ audit.text | translate }}">
                {{ audit.text | translate }}
              </p>
              <small
                ng-if="columnsConfig.what"
                class="text-muted hidden-xs"
                title="{{ audit._parsedChanges }}"
              >
                {{ audit._parsedChanges }}
              </small>
            </div>
          </div>

          <div ng-if="columnsConfig.time" class="col-sm-2 col-md-2">
            <div class="visible-xs text-muted">
              <i c8y-icon="clock-o" title="{{ 'Device time' | translate }}"></i
              ><small>{{ audit.time | absoluteDate }}</small>
            </div>
            <div class="hidden-xs text-right text-muted">
              <i c8y-icon="clock-o" title="{{ 'Device time' | translate }}"></i
              ><small>{{ audit.time | absoluteDate }}</small>
            </div>
          </div>
        </div>
      </div>
      <!-- /.list-item-body -->
    </div>
  </div>
</div>
