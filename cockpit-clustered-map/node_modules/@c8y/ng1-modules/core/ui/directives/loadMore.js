"use strict";!function(){function e(n){e.$inject=["$scope","$element"];var i=[250,500,1e3];function a(e){if(e.paging&&(e.paging.next||e.paging.blind))return n("More data may be available")}return{restrict:"EA",replace:!0,templateUrl:":::PLUGIN_PATH:::/ui/views/loadmore.html",link:function(t,e,n){t.hidePageSize=!0,t.getLoadMoreTooltip=_.partial(a,t);var o=!_.isUndefined(n.changePageSize);!t.hidePageSize&&o&&(t._pageSizes=_.cloneDeep(i),t.$on("paging.statistics.pageSize",function(e){var n=parseInt(e,10),o=_.cloneDeep(i);n&&(t._pageSizes=_.without(o,n))}))},controller:e};function e(o,t){var i;function a(e){o.paging.next&&e.forEach(function(e){e.isIntersecting&&o.loadNext()})}o.$watch("paging",function(e){if(e&&e.next){var n=e.next;n===_.noop?o.shouldShowLoadMore=!0:n().then(function(e){o.shouldShowLoadMore=!_.isEmpty(e),o.shouldShowLoadMore&&function(){var e=jQuery(t),n=_.head(e);if(!i){var o=n.querySelector(".classForObserver");(i=new IntersectionObserver(a,{root:null,rootMargin:"0px 0px 0px 0px",threshold:1})).observe(o)}}()})}else o.shouldShowLoadMore=!1})}}e.$inject=["gettext"],angular.module("c8y.ui").directive("c8yLoadMore",e)}();