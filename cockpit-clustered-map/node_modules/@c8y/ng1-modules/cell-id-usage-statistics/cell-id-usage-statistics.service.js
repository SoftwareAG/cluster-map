"use strict";function asyncGeneratorStep(t,e,r,n,a,i,s){try{var u=t[i](s),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,a)}function _asyncToGenerator(u){return function(){var t=this,s=arguments;return new Promise(function(e,r){var n=u.apply(t,s);function a(t){asyncGeneratorStep(n,e,r,a,i,"next",t)}function i(t){asyncGeneratorStep(n,e,r,a,i,"throw",t)}a(void 0)})}}!function(){function t(n,a,t,e){var i=e.TENANT_STATS_SERVICE_ENDPOINT,s=e.SUBTENANTS_STATS_SERVICE_ENDPOINT,r=e.SUBTENANT_STATS_COLUMNS;return{getSubtenantListColumns:function(){return[t.getColumn(r.tenantId),t.getColumn(r.apiRequests),t.getColumn(r.activeDevices)]},getTenantStatisticsFor:function(t){return u.apply(this,arguments)},getSubtenantsStatisticsFor:function(t){return c.apply(this,arguments)},isCellIDMicroserviceAvailable:function(){return l.apply(this,arguments)}};function u(){return(u=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=a,t.next=4,n.get(a.url(i),{params:a.timeOrderFilter(a.pageSizeNoTotalFilter(e)),silentError:!0});case 4:return t.t1=t.sent,r=t.t0.getResData.call(t.t0,t.t1),t.abrupt("return",o(r));case 9:return t.prev=9,t.t2=t.catch(0),t.abrupt("return",o({}));case 12:case"end":return t.stop()}},t,null,[[0,9]])}))).apply(this,arguments)}function c(){return(c=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=a,t.next=4,n.get(a.url(s),{params:a.timeOrderFilter(a.pageSizeNoTotalFilter(e)),silentError:!0});case 4:return t.t1=t.sent,r=t.t0.getResData.call(t.t0,t.t1),t.abrupt("return",_.map(r,o));case 9:return t.prev=9,t.t2=t.catch(0),t.abrupt("return",[]);case 12:case"end":return t.stop()}},t,null,[[0,9]])}))).apply(this,arguments)}function o(t){return{tenantId:_.get(t,"tenant"),apiRequests:_.get(t,"statistics.apiRequests",0),activeDevices:_.get(t,"statistics.activeDevices",0)}}function l(){return(l=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.get(a.url(i),{params:{dateFrom:moment().format(a.dateFormat)},silentError:!0});case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:case"end":return t.stop()}},t,null,[[0,6]])}))).apply(this,arguments)}}t.$inject=["$http","c8yBase","c8yFilteringSortingCollections","cellIdUsageStatisticsConstants"],angular.module("c8y.cellIdUsageStatistics").factory("cellIdUsageStatisticsService",t)}();