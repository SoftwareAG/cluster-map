"use strict";!function(){s.$inject=["c8yAlarms"],a.$inject=["c8yObjectMappings"];var t={templateUrl:":::PLUGIN_PATH:::/object-mapping.html",controllerAs:"vm",controller:s,bindings:{autoObserveParams:"<",hideAutoObserve:"@",mapping:"<",customActions:"<"}},e={template:'\n      <span ng-show="!vm.hasMeasurement && !vm.hasAlarm && !vm.hasEvent" class="text-muted">--</span>\n      <i c8y-icon="line-chart" uib-tooltip="{{\'Measurements\' | translate}}" ng-show="vm.hasMeasurement"></i>\n      <i c8y-icon="bell" uib-tooltip="{{\'Alarms\' | translate}}" ng-show="vm.hasAlarm"></i>\n      <i c8y-icon="c8y-events" uib-tooltip="{{\'Events\' | translate}}" ng-show="vm.hasEvent"></i>\n      <i c8y-icon="eye" uib-tooltip="{{\'Auto observe\' | translate}}" ng-show="vm.mapping.observeParameters.autoObserve"></i>\n      <i c8y-icon="wrench" uib-tooltip="{{\'Custom action\' | translate}}" ng-show="vm.hasCustomAction"></i>      \n    ',controllerAs:"vm",controller:s,bindings:{mapping:"<"}},n={bindings:{data:"<"},template:'\n      <small class="text-muted">{{\'Resources\' | translate}}</small>\n      <span class="badge badge-info">{{::vm.count(vm.data)}}</span>',controller:a,controllerAs:"vm"};function a(t){this.count=t.countResources}function s(t){var e="measurementCreation",n="alarmCreation",a="eventCreation",s="customAction",o="observeParameters.autoObserve",i=!0,c=this;function r(){(c.autoObserveLocked=!1,i)&&(c.hasMeasurement||c.hasEvent||c.hasAlarm||c.hasCustomAction||(c.autoObserveLocked=!0,_.unset(c.mapping,o)))}_.assign(c,{alarmSeverities:t.severityList,alarmStatus:t.statusList,$onInit:function(){_.isUndefined(c.hideAutoObserve)&&(c.hideAutoObserve=!1)},$onChanges:function(t){t.mapping&&function(){var t=c.mapping;c.hasMeasurement=!!_.get(t,e),c.hasEvent=!!_.get(t,a),c.hasAlarm=!!_.get(t,n),c.hasCustomAction=!!_.get(t,s),r()}()},updateMeasurementKey:function(t){t||_.unset(c.mapping,e);r()},updateAlarmKey:function(t){t||_.unset(c.mapping,n);r()},updateEventKey:function(t){t||_.unset(c.mapping,a);r()},updateCustomActionKey:function(t){t?_.set(c.mapping,"".concat(s,".type"),null):_.unset(c.mapping,s);r()},formName:"mappingForm"})}angular.module("c8y.deviceProtocols").component("c8yObjectMapping",t).component("c8yObjectMappingStatusIcons",e).component("c8yDeviceProtocolRowCountResources",n)}();