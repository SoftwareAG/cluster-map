{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{2387:function(e,t,r){var n={\"./box.min\":[569,0],\"./box.min.json\":[569,0],\"./phoneModel.min\":[570,1],\"./phoneModel.min.json\":[570,1]};function s(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}));var t=n[e],s=t[0];return r.e(t[1]).then((function(){return r.t(s,3)}))}s.keys=function(){return Object.keys(n)},s.id=2387,e.exports=s},2650:function(e,t,r){\"use strict\";var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__metadata||function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)};this&&this.__importDefault;Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(129),u=r(2651),l=r(211),c=r(246),d=r(168),p=r(3221),f=r(3224),j=r(571),h=r(3227),m=r(3222),b=r(3219),y=function(e){function t(t){var r=e.call(this)||this;return r.upgrade=t,r}return s(t,e),t.ctorParameters=function(){return[{type:c.UpgradeModule}]},t=o([i.NgModule({imports:[p.UpgradeModule,u.BrowserAnimationsModule,d.RouterModule.forRoot(),l.RouterModule.forRoot(p.UPGRADE_ROUTES.slice(),{enableTracing:!1,useHash:!0}),d.CoreModule.forRoot(),f.AssetsNavigatorModule,h.ReportsModule,c.UpgradeModule,p.DashboardUpgradeModule,j.CockpitDashboardModule,m.SensorPhoneModule],declarations:[b.ClusteredMap],entryComponents:[b.ClusteredMap],providers:[{provide:d.HOOK_COMPONENTS,multi:!0,useValue:[{id:\"sag.map.cluster\",label:\"Clustered Map\",description:\"Display a clustered map of all devices\",component:b.ClusteredMap}]}]}),a(\"design:paramtypes\",[c.UpgradeModule])],t)}(p.HybridAppModule);t.AppModule=y},3219:function(e,t,r){\"use strict\";var n=this&&this.__decorate||function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},s=this&&this.__metadata||function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function i(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?s(e.value):new r((function(t){t(e.value)})).then(a,i)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,\"__esModule\",{value:!0});var u=r(129),l=r(250),c=r(286),d=function(){function e(e){this.fetchClient=e}return e.prototype.ngOnInit=function(){var e=this;this.map=c.map(\"map\").setView([0,0],2),c.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",{attribution:'&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'}).addTo(this.map),this.markers=c.geoJson(null,{pointToLayer:this.createClusterIcon}).addTo(this.map),this.map.on(\"moveend\",(function(){return o(e,void 0,void 0,(function(){return a(this,(function(e){return[2,this.update()]}))}))})),this.markers.on(\"click\",(function(t){return o(e,void 0,void 0,(function(){var e,r;return a(this,(function(n){switch(n.label){case 0:return t.layer.feature.properties.cluster_id?[4,this.fetchClient.fetch(\"service/server-side-clustering/update\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({getClusterExpansionZoom:t.layer.feature.properties.cluster_id,center:t.latlng})})]:[3,3];case 1:return e=n.sent(),console.log(e),[4,e.json()];case 2:r=n.sent(),console.log(r),this.map.flyTo(r.center,r.expansionZoom),n.label=3;case 3:return[2]}}))}))})),this.update()},e.prototype.createClusterIcon=function(e,t){if(!e.properties.cluster)return c.marker(t);var r=e.properties.point_count,n=r<100?\"small\":r<1e3?\"medium\":\"large\",s=c.divIcon({html:\"<div><span>\"+e.properties.point_count_abbreviated+\"</span></div>\",className:\"marker-cluster marker-cluster-\"+n,iconSize:c.point(40,40)});return c.marker(t,{icon:s})},e.prototype.update=function(){return o(this,void 0,void 0,(function(){var e,t,r;return a(this,(function(n){switch(n.label){case 0:return e=this.map.getBounds(),[4,this.fetchClient.fetch(\"service/server-side-clustering/update\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({bbox:[e.getWest(),e.getSouth(),e.getEast(),e.getNorth()],zoom:this.map.getZoom()})})];case 1:return t=n.sent(),console.log(t),[4,t.json()];case 2:return r=n.sent(),console.log(r),this.markers.clearLayers(),this.markers.addData(r),[2]}}))}))},e.ctorParameters=function(){return[{type:l.FetchClient}]},e=n([u.Component({selector:\"clustered-map\",template:'<div id=\"map\" class=\"c8y-map-internal\"></div>',styles:[i(r(3220)).default]}),s(\"design:paramtypes\",[l.FetchClient])],e)}();t.ClusteredMap=d},3220:function(e,t,r){\"use strict\";r.r(t),t.default='.marker-cluster-small {\\n\\tbackground-color: rgba(181, 226, 140, 0.6);\\n\\t}\\n.marker-cluster-small div {\\n\\tbackground-color: rgba(110, 204, 57, 0.6);\\n\\t}\\n\\n.marker-cluster-medium {\\n\\tbackground-color: rgba(241, 211, 87, 0.6);\\n\\t}\\n.marker-cluster-medium div {\\n\\tbackground-color: rgba(240, 194, 12, 0.6);\\n\\t}\\n\\n.marker-cluster-large {\\n\\tbackground-color: rgba(253, 156, 115, 0.6);\\n\\t}\\n.marker-cluster-large div {\\n\\tbackground-color: rgba(241, 128, 23, 0.6);\\n\\t}\\n\\n.marker-cluster {\\n\\tbackground-clip: padding-box;\\n\\tborder-radius: 20px;\\n\\t}\\n.marker-cluster div {\\n\\twidth: 30px;\\n\\theight: 30px;\\n\\tmargin-left: 5px;\\n\\tmargin-top: 5px;\\n\\n\\ttext-align: center;\\n\\tborder-radius: 15px;\\n\\tfont: 12px \"Helvetica Neue\", Arial, Helvetica, sans-serif;\\n\\t}\\n.marker-cluster span {\\n\\tline-height: 30px;\\n\\t}'},3231:function(e,t,r){\"use strict\";this&&this.__importDefault;Object.defineProperty(t,\"__esModule\",{value:!0}),r(585),r(737);var n=r(129),s=r(2648),o=r(2650);n.enableProdMode(),t.bootstrap=function(){return s.platformBrowserDynamic().bootstrapModule(o.AppModule).catch((function(e){return console.log(e)}))}},533:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=533},585:function(e,t,r){\"use strict\";this&&this.__importDefault;Object.defineProperty(t,\"__esModule\",{value:!0}),r(586),r(601),r(720),window.__Zone_disable_requestAnimationFrame=!0,window.__zone_symbol__BLACK_LISTED_EVENTS=[\"scroll\",\"mousemove\",\"message\",\"mouseover\",\"mouseout\",\"mouseenter\",\"mouseleave\"],r(731),r(732),r(733).addPolyfills()},737:function(e,t,r){\"use strict\";this&&this.__importDefault;Object.defineProperty(t,\"__esModule\",{value:!0}),r(738),r(515),r(2040),r(2047),r(2060),r(2072),r(2101),r(2110),r(241),r(2240),r(2286),r(2292),r(517),r(2329),r(518),r(242),r(516),r(2350),r(2355),r(2361),r(2370),r(2379),r(2401),r(2408),r(2413),r(2420),r(2422),r(2424),r(293),r(2521),r(519),r(515),r(2543),r(2553),r(2559),r(2568),r(2575),r(2582),r(2601),r(2614),r(2624),r(2634),r(2643)},739:function(e,t,r){var n={\"./af\":359,\"./af.js\":359,\"./ar\":360,\"./ar-dz\":361,\"./ar-dz.js\":361,\"./ar-kw\":362,\"./ar-kw.js\":362,\"./ar-ly\":363,\"./ar-ly.js\":363,\"./ar-ma\":364,\"./ar-ma.js\":364,\"./ar-sa\":365,\"./ar-sa.js\":365,\"./ar-tn\":366,\"./ar-tn.js\":366,\"./ar.js\":360,\"./az\":367,\"./az.js\":367,\"./be\":368,\"./be.js\":368,\"./bg\":369,\"./bg.js\":369,\"./bm\":370,\"./bm.js\":370,\"./bn\":371,\"./bn.js\":371,\"./bo\":372,\"./bo.js\":372,\"./br\":373,\"./br.js\":373,\"./bs\":374,\"./bs.js\":374,\"./ca\":375,\"./ca.js\":375,\"./cs\":376,\"./cs.js\":376,\"./cv\":377,\"./cv.js\":377,\"./cy\":378,\"./cy.js\":378,\"./da\":379,\"./da.js\":379,\"./de\":380,\"./de-at\":381,\"./de-at.js\":381,\"./de-ch\":382,\"./de-ch.js\":382,\"./de.js\":380,\"./dv\":383,\"./dv.js\":383,\"./el\":384,\"./el.js\":384,\"./en-SG\":385,\"./en-SG.js\":385,\"./en-au\":386,\"./en-au.js\":386,\"./en-ca\":387,\"./en-ca.js\":387,\"./en-gb\":388,\"./en-gb.js\":388,\"./en-ie\":389,\"./en-ie.js\":389,\"./en-il\":390,\"./en-il.js\":390,\"./en-nz\":391,\"./en-nz.js\":391,\"./eo\":392,\"./eo.js\":392,\"./es\":393,\"./es-do\":394,\"./es-do.js\":394,\"./es-us\":395,\"./es-us.js\":395,\"./es.js\":393,\"./et\":396,\"./et.js\":396,\"./eu\":397,\"./eu.js\":397,\"./fa\":398,\"./fa.js\":398,\"./fi\":399,\"./fi.js\":399,\"./fo\":400,\"./fo.js\":400,\"./fr\":401,\"./fr-ca\":402,\"./fr-ca.js\":402,\"./fr-ch\":403,\"./fr-ch.js\":403,\"./fr.js\":401,\"./fy\":404,\"./fy.js\":404,\"./ga\":405,\"./ga.js\":405,\"./gd\":406,\"./gd.js\":406,\"./gl\":407,\"./gl.js\":407,\"./gom-latn\":408,\"./gom-latn.js\":408,\"./gu\":409,\"./gu.js\":409,\"./he\":410,\"./he.js\":410,\"./hi\":411,\"./hi.js\":411,\"./hr\":412,\"./hr.js\":412,\"./hu\":413,\"./hu.js\":413,\"./hy-am\":414,\"./hy-am.js\":414,\"./id\":415,\"./id.js\":415,\"./is\":416,\"./is.js\":416,\"./it\":417,\"./it-ch\":418,\"./it-ch.js\":418,\"./it.js\":417,\"./ja\":419,\"./ja.js\":419,\"./jv\":420,\"./jv.js\":420,\"./ka\":421,\"./ka.js\":421,\"./kk\":422,\"./kk.js\":422,\"./km\":423,\"./km.js\":423,\"./kn\":424,\"./kn.js\":424,\"./ko\":425,\"./ko.js\":425,\"./ku\":426,\"./ku.js\":426,\"./ky\":427,\"./ky.js\":427,\"./lb\":428,\"./lb.js\":428,\"./lo\":429,\"./lo.js\":429,\"./lt\":430,\"./lt.js\":430,\"./lv\":431,\"./lv.js\":431,\"./me\":432,\"./me.js\":432,\"./mi\":433,\"./mi.js\":433,\"./mk\":434,\"./mk.js\":434,\"./ml\":435,\"./ml.js\":435,\"./mn\":436,\"./mn.js\":436,\"./mr\":437,\"./mr.js\":437,\"./ms\":438,\"./ms-my\":439,\"./ms-my.js\":439,\"./ms.js\":438,\"./mt\":440,\"./mt.js\":440,\"./my\":441,\"./my.js\":441,\"./nb\":442,\"./nb.js\":442,\"./ne\":443,\"./ne.js\":443,\"./nl\":444,\"./nl-be\":445,\"./nl-be.js\":445,\"./nl.js\":444,\"./nn\":446,\"./nn.js\":446,\"./pa-in\":447,\"./pa-in.js\":447,\"./pl\":448,\"./pl.js\":448,\"./pt\":449,\"./pt-br\":450,\"./pt-br.js\":450,\"./pt.js\":449,\"./ro\":451,\"./ro.js\":451,\"./ru\":452,\"./ru.js\":452,\"./sd\":453,\"./sd.js\":453,\"./se\":454,\"./se.js\":454,\"./si\":455,\"./si.js\":455,\"./sk\":456,\"./sk.js\":456,\"./sl\":457,\"./sl.js\":457,\"./sq\":458,\"./sq.js\":458,\"./sr\":459,\"./sr-cyrl\":460,\"./sr-cyrl.js\":460,\"./sr.js\":459,\"./ss\":461,\"./ss.js\":461,\"./sv\":462,\"./sv.js\":462,\"./sw\":463,\"./sw.js\":463,\"./ta\":464,\"./ta.js\":464,\"./te\":465,\"./te.js\":465,\"./tet\":466,\"./tet.js\":466,\"./tg\":467,\"./tg.js\":467,\"./th\":468,\"./th.js\":468,\"./tl-ph\":469,\"./tl-ph.js\":469,\"./tlh\":470,\"./tlh.js\":470,\"./tr\":471,\"./tr.js\":471,\"./tzl\":472,\"./tzl.js\":472,\"./tzm\":473,\"./tzm-latn\":474,\"./tzm-latn.js\":474,\"./tzm.js\":473,\"./ug-cn\":475,\"./ug-cn.js\":475,\"./uk\":476,\"./uk.js\":476,\"./ur\":477,\"./ur.js\":477,\"./uz\":478,\"./uz-latn\":479,\"./uz-latn.js\":479,\"./uz.js\":478,\"./vi\":480,\"./vi.js\":480,\"./x-pseudo\":481,\"./x-pseudo.js\":481,\"./yo\":482,\"./yo.js\":482,\"./zh-cn\":483,\"./zh-cn.js\":483,\"./zh-hk\":484,\"./zh-hk.js\":484,\"./zh-tw\":485,\"./zh-tw.js\":485};function s(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=o,e.exports=s,s.id=739}}]);","extractedComments":[]}